{
  "last_link_id": 498,
  "nodes": [
    {
      "outputs": [
        {
          "name": "WANVIDEOMODEL",
          "links": [
            302
          ],
          "label": "WANVIDEOMODEL",
          "type": "WANVIDEOMODEL"
        }
      ],
      "color": "#223",
      "widgets_values": [
        "WanModel"
      ],
      "inputs": [],
      "flags": {
        "collapsed": true
      },
      "type": "GetNode",
      "title": "Get_WanModel",
      "mode": 0,
      "bgcolor": "#335",
      "size": [
        210,
        58
      ],
      "pos": [
        4490,
        2350
      ],
      "id": 152,
      "properties": {},
      "order": 0
    },
    {
      "outputs": [
        {
          "name": "IMAGE",
          "links": [
            287
          ],
          "label": "IMAGE",
          "type": "IMAGE",
          "localized_name": "IMAGE"
        }
      ],
      "color": "#323",
      "widgets_values": [
        8,
        512,
        1,
        0
      ],
      "inputs": [
        {
          "widget": {
            "name": "height"
          },
          "name": "height",
          "link": 283,
          "label": "height",
          "type": "INT"
        }
      ],
      "flags": {
        "collapsed": true
      },
      "type": "EmptyImage",
      "mode": 0,
      "bgcolor": "#535",
      "size": [
        315,
        130
      ],
      "pos": [
        5500,
        2260
      ],
      "id": 155,
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.26",
        "Node name for S&R": "EmptyImage",
        "ttNbgOverride": {
          "bgcolor": "#535",
          "groupcolor": "#a1309b",
          "color": "#323"
        }
      },
      "order": 110
    },
    {
      "outputs": [
        {
          "name": "images",
          "links": [
            288
          ],
          "label": "images",
          "type": "IMAGE",
          "localized_name": "images"
        }
      ],
      "color": "#323",
      "widgets_values": [
        2,
        "down",
        true,
        null
      ],
      "inputs": [
        {
          "name": "image_1",
          "link": 290,
          "label": "image_1",
          "type": "IMAGE",
          "localized_name": "image_1"
        },
        {
          "name": "image_2",
          "link": 291,
          "label": "image_2",
          "type": "IMAGE",
          "localized_name": "image_2"
        }
      ],
      "flags": {},
      "type": "ImageConcatMulti",
      "mode": 0,
      "bgcolor": "#535",
      "size": [
        315,
        150
      ],
      "pos": [
        5060,
        2310
      ],
      "id": 160,
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "52c2e31a903fec2dd654fb614ea82ba2757d5028",
        "ttNbgOverride": {
          "bgcolor": "#535",
          "groupcolor": "#a1309b",
          "color": "#323"
        }
      },
      "order": 86
    },
    {
      "outputs": [
        {
          "name": "WANVAE",
          "links": [
            297
          ],
          "label": "WANVAE",
          "type": "WANVAE"
        }
      ],
      "color": "#322",
      "widgets_values": [
        "WanVAE"
      ],
      "inputs": [],
      "flags": {
        "collapsed": true
      },
      "type": "GetNode",
      "title": "Get_WanVAE",
      "mode": 0,
      "bgcolor": "#533",
      "size": [
        210,
        58
      ],
      "pos": [
        4830,
        2280
      ],
      "id": 166,
      "properties": {},
      "order": 1
    },
    {
      "outputs": [
        {
          "name": "IMAGE",
          "links": [
            319
          ],
          "label": "IMAGE",
          "type": "IMAGE"
        }
      ],
      "color": "#2a363b",
      "widgets_values": [
        "reference_image"
      ],
      "inputs": [],
      "flags": {
        "collapsed": false
      },
      "type": "GetNode",
      "title": "Get_reference_image",
      "mode": 0,
      "bgcolor": "#3f5159",
      "size": [
        233.0802459716797,
        60.23356246948242
      ],
      "pos": [
        4960,
        2060
      ],
      "id": 153,
      "properties": {},
      "order": 2
    },
    {
      "outputs": [
        {
          "name": "IMAGE",
          "links": [
            291
          ],
          "label": "IMAGE",
          "type": "IMAGE",
          "localized_name": "IMAGE"
        }
      ],
      "color": "#323",
      "widgets_values": [
        10,
        2,
        48,
        32,
        "white",
        "black",
        "FreeMono.ttf",
        "control_video",
        "up",
        ""
      ],
      "inputs": [
        {
          "name": "image",
          "link": 285,
          "label": "image",
          "type": "IMAGE",
          "localized_name": "image"
        },
        {
          "widget": {
            "name": "caption"
          },
          "shape": 7,
          "name": "caption",
          "label": "caption",
          "type": "STRING"
        }
      ],
      "flags": {
        "collapsed": true
      },
      "type": "AddLabel",
      "mode": 0,
      "bgcolor": "#535",
      "size": [
        315,
        294
      ],
      "pos": [
        5240,
        2260
      ],
      "id": 157,
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "52c2e31a903fec2dd654fb614ea82ba2757d5028",
        "Node name for S&R": "AddLabel",
        "ttNbgOverride": {
          "bgcolor": "#535",
          "groupcolor": "#a1309b",
          "color": "#323"
        }
      },
      "order": 71
    },
    {
      "outputs": [
        {
          "name": "vram_management_args",
          "links": [],
          "label": "vram_management_args",
          "type": "VRAM_MANAGEMENTARGS",
          "localized_name": "vram_management_args"
        }
      ],
      "color": "#223",
      "widgets_values": [
        1
      ],
      "inputs": [],
      "flags": {},
      "type": "WanVideoVRAMManagement",
      "mode": 0,
      "bgcolor": "#335",
      "size": [
        315,
        58
      ],
      "pos": [
        850,
        2050
      ],
      "id": 201,
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "d9b1f4d1a5aea91d101ae97a54714a5861af3f50",
        "Node name for S&R": "WanVideoVRAMManagement"
      },
      "order": 3
    },
    {
      "outputs": [],
      "color": "#432",
      "widgets_values": [
        "模型下载:\nhttps://huggingface.co/Kijai/WanVideo_comfy/tree/main"
      ],
      "inputs": [],
      "flags": {},
      "type": "Note",
      "mode": 0,
      "bgcolor": "#653",
      "size": [
        359.0753479003906,
        88
      ],
      "pos": [
        1230,
        1450
      ],
      "id": 204,
      "properties": {},
      "order": 4
    },
    {
      "outputs": [],
      "color": "#432",
      "widgets_values": [
        "fp8_fast 似乎会导致质量严重下降\nfp_16_快速启用“在FP16 GEM中的FP16完全Accmumulation功能，在最新的pytorch夜间可用，这是大约20%的速度提升。\n如果你安装了 Sageattn，几乎可以将推理速度提高一倍。"
      ],
      "inputs": [],
      "flags": {},
      "type": "Note",
      "mode": 0,
      "bgcolor": "#653",
      "size": [
        374.3061828613281,
        171.9547576904297
      ],
      "pos": [
        1220,
        1590
      ],
      "id": 205,
      "properties": {},
      "order": 5
    },
    {
      "outputs": [],
      "color": "#432",
      "widgets_values": [
        "如果你安装了 Triton，连接这个可以提升约 30%的速度"
      ],
      "inputs": [],
      "flags": {},
      "type": "Note",
      "mode": 0,
      "bgcolor": "#653",
      "size": [
        303.0501403808594,
        88
      ],
      "pos": [
        440,
        1550
      ],
      "id": 206,
      "properties": {},
      "order": 6
    },
    {
      "outputs": [],
      "color": "#432",
      "widgets_values": [
        "根据您的VRAM调整块以进行交换，这是在速度和内存使用量之间的权衡。\n或者，可以使用Diffsynt-Studios中引入的VRAM管理选项。这通常速度较慢，但与BlockSwap相比可以节省更多的VRAM。"
      ],
      "inputs": [],
      "flags": {},
      "type": "Note",
      "mode": 0,
      "bgcolor": "#653",
      "size": [
        314.96246337890625,
        152.77333068847656
      ],
      "pos": [
        480,
        1840
      ],
      "id": 207,
      "properties": {},
      "order": 7
    },
    {
      "outputs": [
        {
          "name": "*",
          "label": "*",
          "type": "*"
        }
      ],
      "color": "#1b4669",
      "widgets_values": [
        "seed"
      ],
      "inputs": [
        {
          "name": "INT",
          "link": 368,
          "label": "INT",
          "type": "INT"
        }
      ],
      "flags": {
        "collapsed": true
      },
      "type": "SetNode",
      "title": "Set_INT",
      "mode": 0,
      "bgcolor": "#29699c",
      "size": [
        210,
        58
      ],
      "pos": [
        -310,
        -250
      ],
      "id": 213,
      "properties": {
        "previousName": ""
      },
      "order": 82
    },
    {
      "outputs": [
        {
          "shape": 3,
          "name": "STRING",
          "slot_index": 0,
          "links": [
            371
          ],
          "label": "STRING",
          "type": "STRING",
          "localized_name": "STRING"
        }
      ],
      "color": "#c09430",
      "widgets_values": [
        "",
        "",
        "/"
      ],
      "inputs": [
        {
          "widget": {
            "name": "string1"
          },
          "name": "string1",
          "link": 369,
          "label": "string1",
          "type": "STRING"
        },
        {
          "widget": {
            "name": "string2"
          },
          "name": "string2",
          "link": 370,
          "label": "string2",
          "type": "STRING"
        }
      ],
      "flags": {
        "collapsed": true
      },
      "type": "JoinStrings",
      "mode": 0,
      "bgcolor": "rgba(24,24,27,.9)",
      "size": [
        315,
        126
      ],
      "pos": [
        -390,
        630
      ],
      "id": 214,
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "973ceb6ca8b7525d54873805888ad690090d6b1e",
        "Node name for S&R": "JoinStrings"
      },
      "order": 76
    },
    {
      "outputs": [
        {
          "name": "*",
          "label": "*",
          "type": "*"
        }
      ],
      "color": "#c09430",
      "widgets_values": [
        "Name"
      ],
      "inputs": [
        {
          "name": "STRING",
          "link": 371,
          "label": "STRING",
          "type": "STRING"
        }
      ],
      "flags": {
        "collapsed": true
      },
      "type": "SetNode",
      "title": "Set_STRING",
      "mode": 0,
      "bgcolor": "rgba(24,24,27,.9)",
      "size": [
        210,
        58
      ],
      "pos": [
        -390,
        660
      ],
      "id": 215,
      "properties": {
        "previousName": ""
      },
      "order": 92
    },
    {
      "outputs": [],
      "color": "#133372",
      "shape": 2,
      "widgets_values": [
        "# <span style=\"font-family: 'Microsoft YaHei'; font-weight: bold; font-size: 40px; color: #FFAB3B;\">🏄‍阿硕全套资料链接</span>\n\n## <span style=\"font-family: 'Microsoft YaHei'; font-weight: bold; font-size: 26px; color: FFFFFF;\">👇整合包/高级工作流/疑难解答👇\n<br>\n\n## 👉可以加入星球号：<a href=\"https://t.zsxq.com/TIfva\">17259412</a></span>\n微信：yumengashuo\n<br>\n\n\n## <span style=\"font-family: 'Microsoft YaHei'; font-weight: bold; font-size: 26px; color: FFFFFF;\">ComfyUI快速入门：\nhttps://space.bilibili.com/1876480181/lists/4118416?type=season\n（看完前5个视频你就入门了）</span>",
        "markdown",
        "",
        "one_dark"
      ],
      "inputs": [],
      "flags": {},
      "type": "Note Plus (mtb)",
      "mode": 0,
      "bgcolor": "#274786",
      "size": [
        480,
        277
      ],
      "pos": [
        -1490,
        -370
      ],
      "id": 217,
      "properties": {},
      "order": 8
    },
    {
      "outputs": [
        {
          "name": "",
          "label": "",
          "type": "*"
        }
      ],
      "color": "#60965e",
      "shape": 1,
      "inputs": [
        {
          "name": "",
          "label": "",
          "type": "*"
        }
      ],
      "flags": {},
      "type": "Reroute",
      "mode": 0,
      "bgcolor": "#4c824a",
      "size": [
        75,
        26
      ],
      "pos": [
        -990,
        -240
      ],
      "id": 218,
      "properties": {
        "horizontal": false,
        "showOutputText": false
      },
      "order": 9
    },
    {
      "outputs": [
        {
          "name": "",
          "label": "",
          "type": "*"
        }
      ],
      "color": "#563756",
      "shape": 1,
      "inputs": [
        {
          "name": "",
          "label": "",
          "type": "*"
        }
      ],
      "flags": {},
      "type": "Reroute",
      "mode": 0,
      "bgcolor": "#422342",
      "size": [
        75,
        26
      ],
      "pos": [
        -990,
        -280
      ],
      "id": 219,
      "properties": {
        "horizontal": false,
        "showOutputText": false
      },
      "order": 10
    },
    {
      "outputs": [],
      "color": "#fff0",
      "shape": 1,
      "inputs": [],
      "flags": {
        "allow_interaction": true
      },
      "type": "Label (rgthree)",
      "title": "载入模型",
      "mode": 0,
      "bgcolor": "#fff0",
      "size": [
        68,
        17
      ],
      "pos": [
        -900,
        -270
      ],
      "id": 220,
      "properties": {
        "padding": 0,
        "backgroundColor": "transparent",
        "fontFamily": "Arial",
        "borderRadius": 0,
        "textAlign": "left",
        "fontSize": 17,
        "fontColor": "#ffffff"
      },
      "order": 11
    },
    {
      "outputs": [],
      "color": "#fff0",
      "shape": 1,
      "inputs": [],
      "flags": {
        "allow_interaction": true
      },
      "type": "Label (rgthree)",
      "title": "by 阿硕讲ai",
      "mode": 0,
      "bgcolor": "#fff0",
      "size": [
        86.9091796875,
        17
      ],
      "pos": [
        -990,
        -370
      ],
      "id": 221,
      "properties": {
        "padding": 0,
        "backgroundColor": "transparent",
        "fontFamily": "Arial",
        "borderRadius": 0,
        "textAlign": "left",
        "fontSize": 17,
        "fontColor": "#ffa900"
      },
      "order": 12
    },
    {
      "outputs": [
        {
          "name": "",
          "label": "",
          "type": "*"
        }
      ],
      "color": "#ffc04b",
      "shape": 1,
      "inputs": [
        {
          "name": "",
          "label": "",
          "type": "*"
        }
      ],
      "flags": {},
      "type": "Reroute",
      "mode": 0,
      "bgcolor": "#f1ac37",
      "size": [
        75,
        26
      ],
      "pos": [
        -990,
        -320
      ],
      "id": 223,
      "properties": {
        "horizontal": false,
        "showOutputText": false
      },
      "order": 13
    },
    {
      "outputs": [
        {
          "shape": 3,
          "name": "STRING",
          "slot_index": 0,
          "links": [
            369
          ],
          "label": "STRING",
          "type": "STRING",
          "localized_name": "STRING"
        }
      ],
      "color": "#c09430",
      "widgets_values": [
        "视频"
      ],
      "inputs": [],
      "flags": {
        "collapsed": true
      },
      "type": "String Literal",
      "mode": 0,
      "bgcolor": "rgba(24,24,27,.9)",
      "size": [
        288.4223327636719,
        88
      ],
      "pos": [
        -390,
        610
      ],
      "id": 224,
      "properties": {
        "cnr_id": "image-saver",
        "ver": "65e6903eff274a50f8b5cd768f0f96baf37baea1",
        "aux_id": "giriss/comfy-image-saver",
        "Node name for S&R": "String Literal"
      },
      "order": 14
    },
    {
      "outputs": [
        {
          "name": "",
          "label": "",
          "type": "*"
        }
      ],
      "color": "#147aa5",
      "shape": 1,
      "inputs": [
        {
          "name": "",
          "label": "",
          "type": "*"
        }
      ],
      "flags": {},
      "type": "Reroute",
      "mode": 0,
      "bgcolor": "#006691",
      "size": [
        75,
        26
      ],
      "pos": [
        -990,
        -200
      ],
      "id": 227,
      "properties": {
        "horizontal": false,
        "showOutputText": false
      },
      "order": 15
    },
    {
      "outputs": [],
      "color": "#fff0",
      "shape": 1,
      "inputs": [],
      "flags": {
        "allow_interaction": true
      },
      "type": "Label (rgthree)",
      "title": "提示词/条件控制",
      "mode": 0,
      "bgcolor": "#fff0",
      "size": [
        123.72314453125,
        17
      ],
      "pos": [
        -900,
        -230
      ],
      "id": 228,
      "properties": {
        "padding": 0,
        "backgroundColor": "transparent",
        "fontFamily": "Arial",
        "borderRadius": 0,
        "textAlign": "left",
        "fontSize": 17,
        "fontColor": "#ffffff"
      },
      "order": 16
    },
    {
      "outputs": [],
      "color": "#fff0",
      "shape": 1,
      "inputs": [],
      "flags": {
        "allow_interaction": true
      },
      "type": "Label (rgthree)",
      "title": "参数设置",
      "mode": 0,
      "bgcolor": "#fff0",
      "size": [
        68,
        17
      ],
      "pos": [
        -900,
        -190
      ],
      "id": 229,
      "properties": {
        "padding": 0,
        "backgroundColor": "transparent",
        "fontFamily": "Arial",
        "borderRadius": 0,
        "textAlign": "left",
        "fontSize": 17,
        "fontColor": "#ffffff"
      },
      "order": 17
    },
    {
      "outputs": [],
      "color": "#fff0",
      "shape": 1,
      "inputs": [],
      "flags": {
        "allow_interaction": true
      },
      "type": "Label (rgthree)",
      "title": "⬇",
      "mode": 0,
      "bgcolor": "#fff0",
      "size": [
        27.3193359375,
        50
      ],
      "pos": [
        70,
        -420
      ],
      "id": 230,
      "properties": {
        "padding": 0,
        "backgroundColor": "transparent",
        "fontFamily": "Arial",
        "borderRadius": 0,
        "textAlign": "left",
        "fontSize": 50,
        "fontColor": "#ffffff"
      },
      "order": 18
    },
    {
      "outputs": [
        {
          "name": "STRING",
          "slot_index": 0,
          "links": [
            372
          ],
          "label": "STRING",
          "type": "STRING"
        }
      ],
      "color": "#323",
      "widgets_values": [
        "Name"
      ],
      "inputs": [],
      "flags": {
        "collapsed": true
      },
      "type": "GetNode",
      "mode": 0,
      "bgcolor": "#535",
      "size": [
        210,
        58
      ],
      "pos": [
        1630,
        -260
      ],
      "id": 233,
      "properties": {
        "ttNbgOverride": {
          "bgcolor": "#535",
          "groupcolor": "#a1309b",
          "color": "#323"
        }
      },
      "order": 19
    },
    {
      "outputs": [
        {
          "name": "*",
          "label": "*",
          "type": "*"
        }
      ],
      "color": "#2a363b",
      "widgets_values": [
        "img2"
      ],
      "inputs": [
        {
          "name": "IMAGE",
          "link": 378,
          "label": "IMAGE",
          "type": "IMAGE"
        }
      ],
      "flags": {
        "collapsed": false
      },
      "type": "SetNode",
      "title": "Set_img2",
      "mode": 0,
      "bgcolor": "#3f5159",
      "size": [
        210,
        58
      ],
      "pos": [
        460,
        -260
      ],
      "id": 237,
      "properties": {
        "previousName": ""
      },
      "order": 77
    },
    {
      "outputs": [
        {
          "name": "*",
          "label": "*",
          "type": "*"
        }
      ],
      "color": "#1b4669",
      "widgets_values": [
        "frames"
      ],
      "inputs": [
        {
          "name": "INT",
          "link": 382,
          "label": "INT",
          "type": "INT"
        }
      ],
      "flags": {
        "collapsed": true
      },
      "type": "SetNode",
      "title": "Set_frames",
      "mode": 0,
      "bgcolor": "#29699c",
      "size": [
        210,
        58
      ],
      "pos": [
        -290,
        190
      ],
      "id": 241,
      "properties": {
        "previousName": ""
      },
      "order": 84
    },
    {
      "outputs": [],
      "color": "#fff0",
      "shape": 1,
      "inputs": [],
      "flags": {
        "allow_interaction": true
      },
      "type": "Label (rgthree)",
      "title": "⬇",
      "mode": 0,
      "bgcolor": "#fff0",
      "size": [
        27.3193359375,
        50
      ],
      "pos": [
        500,
        -420
      ],
      "id": 248,
      "properties": {
        "padding": 0,
        "backgroundColor": "transparent",
        "fontFamily": "Arial",
        "borderRadius": 0,
        "textAlign": "left",
        "fontSize": 50,
        "fontColor": "#ffffff"
      },
      "order": 20
    },
    {
      "outputs": [],
      "color": "#fff0",
      "shape": 1,
      "inputs": [],
      "flags": {
        "allow_interaction": true
      },
      "type": "Label (rgthree)",
      "title": "开启功能",
      "mode": 0,
      "bgcolor": "#fff0",
      "size": [
        68,
        17
      ],
      "pos": [
        -900,
        -310
      ],
      "id": 252,
      "properties": {
        "padding": 0,
        "backgroundColor": "transparent",
        "fontFamily": "Arial",
        "borderRadius": 0,
        "textAlign": "left",
        "fontSize": 17,
        "fontColor": "#ffffff"
      },
      "order": 21
    },
    {
      "outputs": [
        {
          "name": "*",
          "label": "*",
          "type": "*"
        }
      ],
      "color": "#2a363b",
      "widgets_values": [
        "img1"
      ],
      "inputs": [
        {
          "name": "IMAGE",
          "link": 389,
          "label": "IMAGE",
          "type": "IMAGE"
        }
      ],
      "flags": {
        "collapsed": false
      },
      "type": "SetNode",
      "title": "Set_img1",
      "mode": 0,
      "bgcolor": "#3f5159",
      "size": [
        210,
        58
      ],
      "pos": [
        10,
        -220
      ],
      "id": 235,
      "properties": {
        "previousName": ""
      },
      "order": 94
    },
    {
      "outputs": [
        {
          "name": "*",
          "label": "*",
          "type": "*"
        }
      ],
      "color": "#1b4669",
      "widgets_values": [
        "frame_count"
      ],
      "inputs": [
        {
          "name": "INT",
          "link": 383,
          "label": "INT",
          "type": "INT"
        }
      ],
      "flags": {
        "collapsed": true
      },
      "type": "SetNode",
      "title": "Set_frame_count",
      "mode": 0,
      "bgcolor": "#29699c",
      "size": [
        210,
        60
      ],
      "pos": [
        -80,
        0
      ],
      "id": 260,
      "properties": {
        "previousName": "frame_count"
      },
      "order": 95
    },
    {
      "outputs": [
        {
          "name": "INT",
          "links": [
            387
          ],
          "label": "INT",
          "type": "INT"
        }
      ],
      "color": "#1b4669",
      "widgets_values": [
        "frame_count"
      ],
      "inputs": [],
      "flags": {},
      "type": "GetNode",
      "title": "Get_frame_count",
      "mode": 0,
      "bgcolor": "#29699c",
      "size": [
        210,
        60
      ],
      "pos": [
        2850,
        3340
      ],
      "id": 262,
      "properties": {},
      "order": 22
    },
    {
      "outputs": [
        {
          "name": "*",
          "label": "*",
          "type": "*"
        }
      ],
      "color": "#1b4669",
      "widgets_values": [
        "size"
      ],
      "inputs": [
        {
          "name": "INT",
          "link": 380,
          "label": "INT",
          "type": "INT"
        }
      ],
      "flags": {
        "collapsed": true
      },
      "type": "SetNode",
      "title": "Set_size",
      "mode": 0,
      "bgcolor": "#29699c",
      "size": [
        210,
        58
      ],
      "pos": [
        -320,
        -80
      ],
      "id": 239,
      "properties": {
        "previousName": "size"
      },
      "order": 83
    },
    {
      "outputs": [
        {
          "name": "teacache_args",
          "links": [
            334
          ],
          "label": "teacache_args",
          "type": "TEACACHEARGS",
          "localized_name": "teacache_args"
        }
      ],
      "color": "#323",
      "widgets_values": [
        0.10000000000000002,
        0,
        -1,
        "offload_device",
        "true",
        "e"
      ],
      "inputs": [],
      "flags": {},
      "type": "WanVideoTeaCache",
      "mode": 0,
      "bgcolor": "#535",
      "size": [
        315,
        178
      ],
      "pos": [
        4240,
        2130
      ],
      "id": 147,
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "3869b0482b615b6a8fd6f346467c5ef6627eed72",
        "Node name for S&R": "WanVideoTeaCache",
        "ttNbgOverride": {
          "bgcolor": "#535",
          "groupcolor": "#a1309b",
          "color": "#323"
        }
      },
      "order": 23
    },
    {
      "outputs": [
        {
          "name": "WANVAE",
          "links": [
            276
          ],
          "label": "WANVAE",
          "type": "WANVAE"
        }
      ],
      "color": "#322",
      "widgets_values": [
        "WanVAE"
      ],
      "inputs": [],
      "flags": {
        "collapsed": true
      },
      "type": "GetNode",
      "title": "Get_WanVAE",
      "mode": 0,
      "bgcolor": "#533",
      "size": [
        210,
        58
      ],
      "pos": [
        4230,
        2380
      ],
      "id": 142,
      "properties": {},
      "order": 24
    },
    {
      "outputs": [
        {
          "name": "WANTEXTENCODER",
          "links": [
            299
          ],
          "label": "WANTEXTENCODER",
          "type": "WANTEXTENCODER"
        }
      ],
      "color": "#432",
      "widgets_values": [
        "WanTextEncoder"
      ],
      "inputs": [],
      "flags": {
        "collapsed": true
      },
      "type": "GetNode",
      "title": "Get_WanTextEncoder",
      "mode": 0,
      "bgcolor": "#653",
      "size": [
        210,
        58
      ],
      "pos": [
        3380,
        2120
      ],
      "id": 143,
      "properties": {},
      "order": 25
    },
    {
      "outputs": [
        {
          "name": "WANVIDEOMODEL",
          "links": [
            300
          ],
          "label": "WANVIDEOMODEL",
          "type": "WANVIDEOMODEL"
        }
      ],
      "color": "#223",
      "widgets_values": [
        "WanModel"
      ],
      "inputs": [],
      "flags": {
        "collapsed": true
      },
      "type": "GetNode",
      "title": "Get_WanModel",
      "mode": 0,
      "bgcolor": "#335",
      "size": [
        210,
        58
      ],
      "pos": [
        3410,
        2180
      ],
      "id": 151,
      "properties": {},
      "order": 26
    },
    {
      "outputs": [
        {
          "name": "*",
          "label": "*",
          "type": "*"
        }
      ],
      "color": "#322",
      "widgets_values": [
        "WanVAE"
      ],
      "inputs": [
        {
          "name": "WANVAE",
          "link": 365,
          "label": "WANVAE",
          "type": "WANVAE"
        }
      ],
      "flags": {
        "collapsed": true
      },
      "type": "SetNode",
      "title": "Set_WanVAE",
      "mode": 0,
      "bgcolor": "#533",
      "size": [
        210,
        60
      ],
      "pos": [
        1740,
        2350
      ],
      "id": 122,
      "properties": {
        "previousName": "WanVAE"
      },
      "order": 80
    },
    {
      "outputs": [
        {
          "name": "*",
          "label": "*",
          "type": "*"
        }
      ],
      "color": "#223",
      "widgets_values": [
        "WanModel"
      ],
      "inputs": [
        {
          "name": "WANVIDEOMODEL",
          "link": 367,
          "label": "WANVIDEOMODEL",
          "type": "WANVIDEOMODEL"
        }
      ],
      "flags": {
        "collapsed": true
      },
      "type": "SetNode",
      "title": "Set_WanModel",
      "mode": 0,
      "bgcolor": "#335",
      "size": [
        210,
        60
      ],
      "pos": [
        1740,
        1850
      ],
      "id": 121,
      "properties": {
        "previousName": "WanModel"
      },
      "order": 93
    },
    {
      "outputs": [],
      "color": "#432",
      "widgets_values": [
        "[https://huggingface.co/Kijai/WanVideo_comfy/blob/main/Wan2_1_SkyreelsA2_fp8_e4m3fn.safetensors](https://huggingface.co/Kijai/WanVideo_comfy/blob/main/Wan2_1_SkyreelsA2_fp8_e4m3fn.safetensors)"
      ],
      "inputs": [],
      "flags": {},
      "type": "MarkdownNote",
      "title": "Model link",
      "mode": 0,
      "bgcolor": "#653",
      "size": [
        542.259765625,
        88
      ],
      "pos": [
        1690,
        1590
      ],
      "id": 208,
      "properties": {},
      "order": 27
    },
    {
      "outputs": [
        {
          "name": "*",
          "label": "*",
          "type": "*"
        }
      ],
      "color": "#432",
      "widgets_values": [
        "WanTextEncoder"
      ],
      "inputs": [
        {
          "name": "WANTEXTENCODER",
          "link": 366,
          "label": "WANTEXTENCODER",
          "type": "WANTEXTENCODER"
        }
      ],
      "flags": {
        "collapsed": true
      },
      "type": "SetNode",
      "title": "Set_WanTextEncoder",
      "mode": 0,
      "bgcolor": "#653",
      "size": [
        210,
        60
      ],
      "pos": [
        1740,
        2150
      ],
      "id": 125,
      "properties": {
        "previousName": "WanTextEncoder"
      },
      "order": 79
    },
    {
      "outputs": [
        {
          "name": "*",
          "label": "*",
          "type": "*"
        }
      ],
      "color": "#2a363b",
      "widgets_values": [
        "output1"
      ],
      "inputs": [
        {
          "name": "IMAGE",
          "link": 421,
          "label": "IMAGE",
          "type": "IMAGE"
        }
      ],
      "flags": {},
      "type": "SetNode",
      "title": "Set_output1",
      "mode": 0,
      "bgcolor": "#3f5159",
      "size": [
        210,
        60
      ],
      "pos": [
        5300,
        2540
      ],
      "id": 273,
      "properties": {
        "previousName": "output1"
      },
      "order": 109
    },
    {
      "outputs": [
        {
          "name": "images",
          "slot_index": 0,
          "links": [
            289,
            421
          ],
          "label": "images",
          "type": "IMAGE",
          "localized_name": "images"
        }
      ],
      "color": "#322",
      "widgets_values": [
        false,
        272,
        272,
        144,
        128
      ],
      "inputs": [
        {
          "name": "vae",
          "link": 297,
          "label": "vae",
          "type": "WANVAE",
          "localized_name": "vae"
        },
        {
          "name": "samples",
          "link": 298,
          "label": "samples",
          "type": "LATENT",
          "localized_name": "samples"
        }
      ],
      "flags": {},
      "type": "WanVideoDecode",
      "mode": 0,
      "bgcolor": "#533",
      "size": [
        315,
        198
      ],
      "pos": [
        4950,
        2540
      ],
      "id": 167,
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "d9b1f4d1a5aea91d101ae97a54714a5861af3f50",
        "Node name for S&R": "WanVideoDecode"
      },
      "order": 107
    },
    {
      "outputs": [
        {
          "name": "*",
          "label": "*",
          "type": "*"
        }
      ],
      "color": "#2a363b",
      "widgets_values": [
        "output2"
      ],
      "inputs": [
        {
          "name": "IMAGE",
          "link": 422,
          "label": "IMAGE",
          "type": "IMAGE"
        }
      ],
      "flags": {},
      "type": "SetNode",
      "title": "Set_output2",
      "mode": 0,
      "bgcolor": "#3f5159",
      "size": [
        210,
        60
      ],
      "pos": [
        5840,
        2300
      ],
      "id": 274,
      "properties": {
        "previousName": "output2"
      },
      "order": 112
    },
    {
      "outputs": [
        {
          "name": "images",
          "slot_index": 0,
          "links": [
            422
          ],
          "label": "images",
          "type": "IMAGE",
          "localized_name": "images"
        }
      ],
      "color": "#323",
      "widgets_values": [
        3,
        "left",
        true,
        null
      ],
      "inputs": [
        {
          "name": "image_1",
          "link": 286,
          "label": "image_1",
          "type": "IMAGE",
          "localized_name": "image_1"
        },
        {
          "name": "image_2",
          "link": 287,
          "label": "image_2",
          "type": "IMAGE",
          "localized_name": "image_2"
        },
        {
          "name": "image_3",
          "link": 288,
          "label": "image_3",
          "type": "IMAGE"
        }
      ],
      "flags": {},
      "type": "ImageConcatMulti",
      "mode": 0,
      "bgcolor": "#535",
      "size": [
        315,
        170
      ],
      "pos": [
        5490,
        2300
      ],
      "id": 158,
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "52c2e31a903fec2dd654fb614ea82ba2757d5028",
        "ttNbgOverride": {
          "bgcolor": "#535",
          "groupcolor": "#a1309b",
          "color": "#323"
        }
      },
      "order": 111
    },
    {
      "outputs": [
        {
          "shape": 3,
          "name": "STRING",
          "slot_index": 0,
          "links": [
            373
          ],
          "label": "STRING",
          "type": "STRING",
          "localized_name": "STRING"
        }
      ],
      "color": "#323",
      "widgets_values": [
        "WAN-VACE"
      ],
      "inputs": [],
      "flags": {
        "collapsed": true
      },
      "type": "String Literal",
      "mode": 0,
      "bgcolor": "#535",
      "size": [
        288.4223327636719,
        88
      ],
      "pos": [
        1470,
        -260
      ],
      "id": 232,
      "properties": {
        "cnr_id": "image-saver",
        "ver": "65e6903eff274a50f8b5cd768f0f96baf37baea1",
        "aux_id": "giriss/comfy-image-saver",
        "Node name for S&R": "String Literal",
        "ttNbgOverride": {
          "bgcolor": "#535",
          "groupcolor": "#a1309b",
          "color": "#323"
        }
      },
      "order": 28
    },
    {
      "outputs": [
        {
          "name": "IMAGE",
          "links": [
            424
          ],
          "label": "IMAGE",
          "type": "IMAGE"
        }
      ],
      "color": "#2a363b",
      "widgets_values": [
        "output1"
      ],
      "inputs": [],
      "flags": {
        "collapsed": true
      },
      "type": "GetNode",
      "title": "Get_output1",
      "mode": 0,
      "bgcolor": "#3f5159",
      "size": [
        210,
        58
      ],
      "pos": [
        1450,
        -280
      ],
      "id": 234,
      "properties": {},
      "order": 29
    },
    {
      "outputs": [
        {
          "shape": 3,
          "name": "STRING",
          "slot_index": 0,
          "links": [
            423
          ],
          "label": "STRING",
          "type": "STRING",
          "localized_name": "STRING"
        }
      ],
      "color": "#323",
      "widgets_values": [
        "",
        "",
        "_"
      ],
      "inputs": [
        {
          "widget": {
            "name": "string1"
          },
          "name": "string1",
          "link": 372,
          "label": "string1",
          "type": "STRING"
        },
        {
          "widget": {
            "name": "string2"
          },
          "name": "string2",
          "link": 373,
          "label": "string2",
          "type": "STRING"
        }
      ],
      "flags": {
        "collapsed": true
      },
      "type": "JoinStrings",
      "mode": 0,
      "bgcolor": "#535",
      "size": [
        315,
        126
      ],
      "pos": [
        1770,
        -270
      ],
      "id": 216,
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "973ceb6ca8b7525d54873805888ad690090d6b1e",
        "Node name for S&R": "JoinStrings",
        "ttNbgOverride": {
          "bgcolor": "#535",
          "groupcolor": "#a1309b",
          "color": "#323"
        }
      },
      "order": 69
    },
    {
      "outputs": [
        {
          "name": "STRING",
          "slot_index": 0,
          "links": [
            425
          ],
          "label": "STRING",
          "type": "STRING"
        }
      ],
      "color": "#323",
      "widgets_values": [
        "Name"
      ],
      "inputs": [],
      "flags": {
        "collapsed": true
      },
      "type": "GetNode",
      "mode": 0,
      "bgcolor": "#535",
      "size": [
        210,
        58
      ],
      "pos": [
        1010,
        -230
      ],
      "id": 275,
      "properties": {
        "ttNbgOverride": {
          "bgcolor": "#535",
          "groupcolor": "#a1309b",
          "color": "#323"
        }
      },
      "order": 30
    },
    {
      "outputs": [],
      "color": "#fff0",
      "shape": 1,
      "inputs": [],
      "flags": {
        "allow_interaction": true
      },
      "type": "Label (rgthree)",
      "title": "⬇",
      "mode": 0,
      "bgcolor": "#fff0",
      "size": [
        27.3193359375,
        50
      ],
      "pos": [
        1040,
        -420
      ],
      "id": 247,
      "properties": {
        "padding": 0,
        "backgroundColor": "transparent",
        "fontFamily": "Arial",
        "borderRadius": 0,
        "textAlign": "left",
        "fontSize": 50,
        "fontColor": "#ffffff"
      },
      "order": 31
    },
    {
      "outputs": [],
      "color": "#fff0",
      "shape": 1,
      "inputs": [],
      "flags": {
        "allow_interaction": true
      },
      "type": "Label (rgthree)",
      "title": "⬇",
      "mode": 0,
      "bgcolor": "#fff0",
      "size": [
        27.3193359375,
        50
      ],
      "pos": [
        1690,
        -420
      ],
      "id": 225,
      "properties": {
        "padding": 0,
        "backgroundColor": "transparent",
        "fontFamily": "Arial",
        "borderRadius": 0,
        "textAlign": "left",
        "fontSize": 50,
        "fontColor": "#ffffff"
      },
      "order": 32
    },
    {
      "outputs": [],
      "color": "#fff0",
      "shape": 1,
      "inputs": [],
      "flags": {
        "allow_interaction": true
      },
      "type": "Label (rgthree)",
      "title": "保存输出视频",
      "mode": 0,
      "bgcolor": "#fff0",
      "size": [
        300,
        50
      ],
      "pos": [
        1550,
        -480
      ],
      "id": 244,
      "properties": {
        "padding": 0,
        "backgroundColor": "transparent",
        "fontFamily": "Arial",
        "borderRadius": 0,
        "textAlign": "left",
        "fontSize": 50,
        "fontColor": "#ffffff"
      },
      "order": 33
    },
    {
      "outputs": [
        {
          "name": "da_v2_model",
          "links": [
            308
          ],
          "label": "da_v2_model",
          "type": "DAMODEL",
          "localized_name": "da_v2_model"
        }
      ],
      "color": "#422342",
      "widgets_values": [
        "depth_anything_v2_vitl_fp16.safetensors"
      ],
      "inputs": [],
      "flags": {},
      "type": "DownloadAndLoadDepthAnythingV2Model",
      "mode": 2,
      "bgcolor": "rgba(24,24,27,.9)",
      "size": [
        372.3266296386719,
        61.27016067504883
      ],
      "pos": [
        2590,
        2300
      ],
      "id": 175,
      "properties": {
        "cnr_id": "comfyui-depthanythingv2",
        "ver": "003d7b44bafd3a8a4c3693a9ca3ddcd72f4883ab",
        "Node name for S&R": "DownloadAndLoadDepthAnythingV2Model"
      },
      "order": 34
    },
    {
      "outputs": [
        {
          "name": "image",
          "links": [
            322
          ],
          "label": "image",
          "type": "IMAGE",
          "localized_name": "image"
        },
        {
          "name": "576 width",
          "links": [
            281
          ],
          "label": "width",
          "type": "INT",
          "localized_name": "width"
        },
        {
          "name": "1024 height",
          "links": [
            282
          ],
          "label": "height",
          "type": "INT",
          "localized_name": "height"
        },
        {
          "name": "21 count",
          "links": [
            280
          ],
          "label": "count",
          "type": "INT",
          "localized_name": "count"
        }
      ],
      "color": "#323",
      "widgets_values": [],
      "inputs": [
        {
          "name": "image",
          "link": 361,
          "label": "image",
          "type": "IMAGE",
          "localized_name": "image"
        }
      ],
      "flags": {},
      "type": "GetImageSizeAndCount",
      "mode": 0,
      "bgcolor": "#535",
      "size": [
        277.20001220703125,
        86
      ],
      "pos": [
        3830,
        2600
      ],
      "id": 145,
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "2aa4da0f587f68c1c255b0152ed8f5c334ebe4b4",
        "Node name for S&R": "GetImageSizeAndCount",
        "ttNbgOverride": {
          "bgcolor": "#535",
          "groupcolor": "#a1309b",
          "color": "#323"
        }
      },
      "order": 104
    },
    {
      "outputs": [
        {
          "name": "image",
          "slot_index": 0,
          "links": [
            430
          ],
          "label": "image",
          "type": "IMAGE",
          "localized_name": "image"
        }
      ],
      "color": "#323",
      "widgets_values": [],
      "inputs": [
        {
          "name": "da_model",
          "link": 308,
          "label": "da_model",
          "type": "DAMODEL",
          "localized_name": "da_model"
        },
        {
          "name": "images",
          "link": 393,
          "label": "images",
          "type": "IMAGE",
          "localized_name": "images"
        }
      ],
      "flags": {},
      "type": "DepthAnything_V2",
      "mode": 2,
      "bgcolor": "#535",
      "size": [
        214.20001220703125,
        46
      ],
      "pos": [
        2750,
        2420
      ],
      "id": 174,
      "properties": {
        "cnr_id": "comfyui-depthanythingv2",
        "ver": "003d7b44bafd3a8a4c3693a9ca3ddcd72f4883ab",
        "Node name for S&R": "DepthAnything_V2",
        "ttNbgOverride": {
          "bgcolor": "#535",
          "groupcolor": "#a1309b",
          "color": "#323"
        }
      },
      "order": 87
    },
    {
      "outputs": [],
      "color": "#fff0",
      "shape": 1,
      "inputs": [],
      "flags": {
        "allow_interaction": true
      },
      "type": "Label (rgthree)",
      "title": "载入视频",
      "mode": 0,
      "bgcolor": "#fff0",
      "size": [
        200,
        50
      ],
      "pos": [
        -20,
        -480
      ],
      "id": 245,
      "properties": {
        "padding": 0,
        "backgroundColor": "transparent",
        "fontFamily": "Arial",
        "borderRadius": 0,
        "textAlign": "left",
        "fontSize": 50,
        "fontColor": "#ffffff"
      },
      "order": 35
    },
    {
      "outputs": [],
      "color": "#fff0",
      "shape": 1,
      "inputs": [],
      "flags": {
        "allow_interaction": true
      },
      "type": "Label (rgthree)",
      "title": "Wan2.1 VACE视频转绘",
      "mode": 0,
      "bgcolor": "#fff0",
      "size": [
        516.796875,
        50
      ],
      "pos": [
        -1000,
        -440
      ],
      "id": 226,
      "properties": {
        "padding": 0,
        "backgroundColor": "transparent",
        "fontFamily": "Arial",
        "borderRadius": 0,
        "textAlign": "left",
        "fontSize": 50,
        "fontColor": "#ffffff"
      },
      "order": 36
    },
    {
      "outputs": [
        {
          "name": "source_fps🟨",
          "label": "source_fps🟨",
          "type": "FLOAT",
          "localized_name": "source_fps🟨"
        },
        {
          "name": "source_frame_count🟨",
          "label": "source_frame_count🟨",
          "type": "INT",
          "localized_name": "source_frame_count🟨"
        },
        {
          "name": "source_duration🟨",
          "label": "source_duration🟨",
          "type": "FLOAT",
          "localized_name": "source_duration🟨"
        },
        {
          "name": "source_width🟨",
          "label": "source_width🟨",
          "type": "INT",
          "localized_name": "source_width🟨"
        },
        {
          "name": "source_height🟨",
          "label": "source_height🟨",
          "type": "INT",
          "localized_name": "source_height🟨"
        },
        {
          "name": "loaded_fps🟦",
          "links": [
            435,
            436
          ],
          "label": "loaded_fps🟦",
          "type": "FLOAT",
          "localized_name": "loaded_fps🟦"
        },
        {
          "name": "loaded_frame_count🟦",
          "label": "loaded_frame_count🟦",
          "type": "INT",
          "localized_name": "loaded_frame_count🟦"
        },
        {
          "name": "loaded_duration🟦",
          "label": "loaded_duration🟦",
          "type": "FLOAT",
          "localized_name": "loaded_duration🟦"
        },
        {
          "name": "loaded_width🟦",
          "label": "loaded_width🟦",
          "type": "INT",
          "localized_name": "loaded_width🟦"
        },
        {
          "name": "loaded_height🟦",
          "label": "loaded_height🟦",
          "type": "INT",
          "localized_name": "loaded_height🟦"
        }
      ],
      "color": "#323",
      "widgets_values": {},
      "inputs": [
        {
          "name": "video_info",
          "link": 434,
          "label": "video_info",
          "type": "VHS_VIDEOINFO",
          "localized_name": "video_info"
        }
      ],
      "flags": {
        "collapsed": true
      },
      "type": "VHS_VideoInfo",
      "mode": 0,
      "bgcolor": "#535",
      "size": [
        262,
        206
      ],
      "pos": [
        390,
        -260
      ],
      "id": 285,
      "properties": {
        "Node name for S&R": "VHS_VideoInfo",
        "ttNbgOverride": {
          "bgcolor": "#535",
          "groupcolor": "#a1309b",
          "color": "#323"
        }
      },
      "order": 96
    },
    {
      "outputs": [
        {
          "name": "torch_compile_args",
          "slot_index": 0,
          "links": [
            437
          ],
          "label": "torch_compile_args",
          "type": "WANCOMPILEARGS",
          "localized_name": "torch_compile_args"
        }
      ],
      "color": "#223",
      "widgets_values": [
        "inductor",
        false,
        "default",
        false,
        64,
        true,
        128
      ],
      "inputs": [],
      "flags": {},
      "type": "WanVideoTorchCompileSettings",
      "mode": 0,
      "bgcolor": "#335",
      "size": [
        390.5999755859375,
        202
      ],
      "pos": [
        780,
        1550
      ],
      "id": 209,
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "d9b1f4d1a5aea91d101ae97a54714a5861af3f50",
        "Node name for S&R": "WanVideoTorchCompileSettings"
      },
      "order": 37
    },
    {
      "outputs": [
        {
          "name": "block_swap_args",
          "slot_index": 0,
          "links": [
            438
          ],
          "label": "block_swap_args",
          "type": "BLOCKSWAPARGS",
          "localized_name": "block_swap_args"
        }
      ],
      "color": "#223",
      "widgets_values": [
        10,
        false,
        false,
        true,
        0
      ],
      "inputs": [],
      "flags": {},
      "type": "WanVideoBlockSwap",
      "mode": 0,
      "bgcolor": "#335",
      "size": [
        315,
        154
      ],
      "pos": [
        850,
        1840
      ],
      "id": 212,
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "d9b1f4d1a5aea91d101ae97a54714a5861af3f50",
        "Node name for S&R": "WanVideoBlockSwap"
      },
      "order": 38
    },
    {
      "outputs": [],
      "color": "#fff0",
      "shape": 1,
      "inputs": [],
      "flags": {
        "allow_interaction": true
      },
      "type": "Label (rgthree)",
      "title": "组合结果",
      "mode": 0,
      "bgcolor": "#fff0",
      "size": [
        200,
        50
      ],
      "pos": [
        950,
        -480
      ],
      "id": 246,
      "properties": {
        "padding": 0,
        "backgroundColor": "transparent",
        "fontFamily": "Arial",
        "borderRadius": 0,
        "textAlign": "left",
        "fontSize": 50,
        "fontColor": "#ffffff"
      },
      "order": 39
    },
    {
      "outputs": [],
      "color": "#323",
      "widgets_values": [
        "1",
        0.9
      ],
      "inputs": [],
      "flags": {
        "collapsed": true
      },
      "type": "Bookmark (rgthree)",
      "mode": 0,
      "bgcolor": "#535",
      "size": [
        210,
        62
      ],
      "pos": [
        -590,
        -470
      ],
      "id": 292,
      "properties": {
        "ttNbgOverride": {
          "bgcolor": "#535",
          "groupcolor": "#a1309b",
          "color": "#323"
        }
      },
      "order": 40
    },
    {
      "outputs": [
        {
          "shape": 3,
          "name": "STRING",
          "slot_index": 0,
          "links": [
            428
          ],
          "label": "STRING",
          "type": "STRING",
          "localized_name": "STRING"
        }
      ],
      "color": "#323",
      "widgets_values": [
        "",
        "",
        "_"
      ],
      "inputs": [
        {
          "widget": {
            "name": "string1"
          },
          "name": "string1",
          "link": 425,
          "label": "string1",
          "type": "STRING"
        },
        {
          "widget": {
            "name": "string2"
          },
          "name": "string2",
          "link": 426,
          "label": "string2",
          "type": "STRING"
        }
      ],
      "flags": {
        "collapsed": true
      },
      "type": "JoinStrings",
      "mode": 0,
      "bgcolor": "#535",
      "size": [
        315,
        126
      ],
      "pos": [
        1150,
        -240
      ],
      "id": 278,
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "973ceb6ca8b7525d54873805888ad690090d6b1e",
        "Node name for S&R": "JoinStrings",
        "ttNbgOverride": {
          "bgcolor": "#535",
          "groupcolor": "#a1309b",
          "color": "#323"
        }
      },
      "order": 70
    },
    {
      "outputs": [
        {
          "name": "IMAGE",
          "links": [
            427
          ],
          "label": "IMAGE",
          "type": "IMAGE"
        }
      ],
      "color": "#2a363b",
      "widgets_values": [
        "output2"
      ],
      "inputs": [],
      "flags": {
        "collapsed": true
      },
      "type": "GetNode",
      "title": "Get_output2",
      "mode": 0,
      "bgcolor": "#3f5159",
      "size": [
        210,
        58
      ],
      "pos": [
        830,
        -270
      ],
      "id": 277,
      "properties": {},
      "order": 41
    },
    {
      "outputs": [
        {
          "shape": 3,
          "name": "STRING",
          "slot_index": 0,
          "links": [
            426
          ],
          "label": "STRING",
          "type": "STRING",
          "localized_name": "STRING"
        }
      ],
      "color": "#323",
      "widgets_values": [
        "WAN-VACE"
      ],
      "inputs": [],
      "flags": {
        "collapsed": true
      },
      "type": "String Literal",
      "mode": 0,
      "bgcolor": "#535",
      "size": [
        288.4223327636719,
        88
      ],
      "pos": [
        850,
        -230
      ],
      "id": 276,
      "properties": {
        "cnr_id": "image-saver",
        "ver": "65e6903eff274a50f8b5cd768f0f96baf37baea1",
        "aux_id": "giriss/comfy-image-saver",
        "Node name for S&R": "String Literal",
        "ttNbgOverride": {
          "bgcolor": "#535",
          "groupcolor": "#a1309b",
          "color": "#323"
        }
      },
      "order": 42
    },
    {
      "outputs": [
        {
          "name": "text_embeds",
          "slot_index": 0,
          "links": [
            303
          ],
          "label": "text_embeds",
          "type": "WANVIDEOTEXTEMBEDS",
          "localized_name": "text_embeds"
        }
      ],
      "color": "#432",
      "widgets_values": [
        "Two men in Studio Ghibli style are walking on the road holding tea cups,",
        "bad quality, blurry, messy, chaotic",
        true
      ],
      "inputs": [
        {
          "name": "t5",
          "link": 299,
          "label": "t5",
          "type": "WANTEXTENCODER",
          "localized_name": "t5"
        },
        {
          "shape": 7,
          "name": "model_to_offload",
          "link": 300,
          "label": "model_to_offload",
          "type": "WANVIDEOMODEL",
          "localized_name": "model_to_offload"
        },
        {
          "widget": {
            "name": "positive_prompt"
          },
          "name": "positive_prompt",
          "link": 480,
          "label": "positive_prompt",
          "type": "STRING"
        }
      ],
      "flags": {},
      "type": "WanVideoTextEncode",
      "mode": 0,
      "bgcolor": "#653",
      "size": [
        420.30511474609375,
        261.5306701660156
      ],
      "pos": [
        3680,
        2170
      ],
      "id": 168,
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "3869b0482b615b6a8fd6f346467c5ef6627eed72",
        "Node name for S&R": "WanVideoTextEncode"
      },
      "order": 99
    },
    {
      "outputs": [
        {
          "name": "exp_args",
          "links": [
            306
          ],
          "label": "exp_args",
          "type": "EXPERIMENTALARGS",
          "localized_name": "exp_args"
        }
      ],
      "color": "#323",
      "widgets_values": [
        "",
        true,
        false,
        0,
        false,
        1,
        1.25,
        20
      ],
      "inputs": [],
      "flags": {},
      "type": "WanVideoExperimentalArgs",
      "mode": 0,
      "bgcolor": "#535",
      "size": [
        327.5999755859375,
        226
      ],
      "pos": [
        4230,
        3030
      ],
      "id": 150,
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "2d2a184723dae88388e130659f51c36fcadeaba8",
        "Node name for S&R": "WanVideoExperimentalArgs",
        "ttNbgOverride": {
          "bgcolor": "#535",
          "groupcolor": "#a1309b",
          "color": "#323"
        }
      },
      "order": 43
    },
    {
      "outputs": [
        {
          "name": "image",
          "links": [
            286
          ],
          "label": "image",
          "type": "IMAGE",
          "localized_name": "image"
        },
        {
          "name": "576 width",
          "label": "width",
          "type": "INT",
          "localized_name": "width"
        },
        {
          "name": "1024 height",
          "links": [
            283
          ],
          "label": "height",
          "type": "INT",
          "localized_name": "height"
        },
        {
          "name": "21 count",
          "label": "count",
          "type": "INT",
          "localized_name": "count"
        }
      ],
      "color": "#323",
      "widgets_values": [],
      "inputs": [
        {
          "name": "image",
          "link": 289,
          "label": "image",
          "type": "IMAGE",
          "localized_name": "image"
        }
      ],
      "flags": {},
      "type": "GetImageSizeAndCount",
      "mode": 0,
      "bgcolor": "#535",
      "size": [
        277.20001220703125,
        86
      ],
      "pos": [
        4960,
        2800
      ],
      "id": 159,
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "52c2e31a903fec2dd654fb614ea82ba2757d5028",
        "Node name for S&R": "GetImageSizeAndCount",
        "ttNbgOverride": {
          "bgcolor": "#535",
          "groupcolor": "#a1309b",
          "color": "#323"
        }
      },
      "order": 108
    },
    {
      "outputs": [
        {
          "name": "IMAGE",
          "links": [
            290
          ],
          "label": "IMAGE",
          "type": "IMAGE",
          "localized_name": "IMAGE"
        }
      ],
      "color": "#323",
      "widgets_values": [
        10,
        2,
        48,
        32,
        "white",
        "black",
        "FreeMono.ttf",
        "reference image",
        "up",
        ""
      ],
      "inputs": [
        {
          "name": "image",
          "link": 319,
          "label": "image",
          "type": "IMAGE",
          "localized_name": "image"
        },
        {
          "widget": {
            "name": "caption"
          },
          "shape": 7,
          "name": "caption",
          "label": "caption",
          "type": "STRING"
        }
      ],
      "flags": {
        "collapsed": true
      },
      "type": "AddLabel",
      "mode": 0,
      "bgcolor": "#535",
      "size": [
        315,
        294
      ],
      "pos": [
        5250,
        2090
      ],
      "id": 156,
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "52c2e31a903fec2dd654fb614ea82ba2757d5028",
        "Node name for S&R": "AddLabel",
        "ttNbgOverride": {
          "bgcolor": "#535",
          "groupcolor": "#a1309b",
          "color": "#323"
        }
      },
      "order": 68
    },
    {
      "outputs": [
        {
          "name": "slg_args",
          "links": [
            454
          ],
          "label": "slg_args",
          "type": "SLGARGS",
          "localized_name": "slg_args"
        }
      ],
      "color": "#323",
      "widgets_values": [
        "9,10",
        0.20000000000000004,
        0.5000000000000001
      ],
      "inputs": [],
      "flags": {},
      "type": "WanVideoSLG",
      "mode": 0,
      "bgcolor": "#535",
      "size": [
        315,
        106
      ],
      "pos": [
        4240,
        2840
      ],
      "id": 300,
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "4cebb550326361286ed0a5430cc668241d65b832",
        "Node name for S&R": "WanVideoSLG",
        "ttNbgOverride": {
          "bgcolor": "#535",
          "groupcolor": "#a1309b",
          "color": "#323"
        }
      },
      "order": 44
    },
    {
      "outputs": [
        {
          "name": "feta_args",
          "links": [
            453
          ],
          "label": "feta_args",
          "type": "FETAARGS",
          "localized_name": "feta_args"
        }
      ],
      "color": "#323",
      "widgets_values": [
        0.10000000000000002,
        0,
        1
      ],
      "inputs": [],
      "flags": {},
      "type": "WanVideoEnhanceAVideo",
      "mode": 0,
      "bgcolor": "#535",
      "size": [
        315,
        106
      ],
      "pos": [
        4240,
        3230
      ],
      "id": 299,
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "4cebb550326361286ed0a5430cc668241d65b832",
        "Node name for S&R": "WanVideoEnhanceAVideo",
        "ttNbgOverride": {
          "bgcolor": "#535",
          "groupcolor": "#a1309b",
          "color": "#323"
        }
      },
      "order": 45
    },
    {
      "outputs": [
        {
          "name": "INT",
          "links": [
            455
          ],
          "label": "INT",
          "type": "INT"
        }
      ],
      "color": "#1b4669",
      "widgets_values": [
        "seed"
      ],
      "inputs": [],
      "flags": {},
      "type": "GetNode",
      "title": "Get_seed",
      "mode": 0,
      "bgcolor": "#29699c",
      "size": [
        210,
        60
      ],
      "pos": [
        4350,
        3400
      ],
      "id": 302,
      "properties": {},
      "order": 46
    },
    {
      "outputs": [
        {
          "name": "samples",
          "links": [
            298
          ],
          "label": "samples",
          "type": "LATENT",
          "localized_name": "samples"
        }
      ],
      "color": "#323",
      "widgets_values": [
        20,
        5,
        5,
        1024690054685937,
        "randomize",
        true,
        "unipc",
        0,
        1,
        false,
        "comfy"
      ],
      "inputs": [
        {
          "name": "model",
          "link": 302,
          "label": "model",
          "type": "WANVIDEOMODEL",
          "localized_name": "model"
        },
        {
          "name": "text_embeds",
          "link": 303,
          "label": "text_embeds",
          "type": "WANVIDEOTEXTEMBEDS",
          "localized_name": "text_embeds"
        },
        {
          "name": "image_embeds",
          "link": 304,
          "label": "image_embeds",
          "type": "WANVIDIMAGE_EMBEDS",
          "localized_name": "image_embeds"
        },
        {
          "shape": 7,
          "name": "samples",
          "label": "samples",
          "type": "LATENT",
          "localized_name": "samples"
        },
        {
          "shape": 7,
          "name": "feta_args",
          "link": 453,
          "label": "feta_args",
          "type": "FETAARGS",
          "localized_name": "feta_args"
        },
        {
          "shape": 7,
          "name": "context_options",
          "label": "context_options",
          "type": "WANVIDCONTEXT",
          "localized_name": "context_options"
        },
        {
          "shape": 7,
          "name": "teacache_args",
          "link": 334,
          "label": "teacache_args",
          "type": "TEACACHEARGS",
          "localized_name": "teacache_args"
        },
        {
          "shape": 7,
          "name": "flowedit_args",
          "label": "flowedit_args",
          "type": "FLOWEDITARGS",
          "localized_name": "flowedit_args"
        },
        {
          "shape": 7,
          "name": "slg_args",
          "link": 454,
          "label": "slg_args",
          "type": "SLGARGS",
          "localized_name": "slg_args"
        },
        {
          "shape": 7,
          "name": "loop_args",
          "label": "loop_args",
          "type": "LOOPARGS",
          "localized_name": "loop_args"
        },
        {
          "shape": 7,
          "name": "experimental_args",
          "link": 306,
          "label": "experimental_args",
          "type": "EXPERIMENTALARGS",
          "localized_name": "experimental_args"
        },
        {
          "shape": 7,
          "name": "sigmas",
          "label": "sigmas",
          "type": "SIGMAS",
          "localized_name": "sigmas"
        },
        {
          "widget": {
            "name": "seed"
          },
          "name": "seed",
          "link": 455,
          "label": "seed",
          "type": "INT"
        },
        {
          "shape": 7,
          "name": "fantasytalking_embeds",
          "label": "fantasytalking_embeds",
          "type": "FANTASYTALKING_EMBEDS",
          "localized_name": "fantasytalking_embeds"
        },
        {
          "shape": 7,
          "name": "unianimate_poses",
          "label": "unianimate_poses",
          "type": "UNIANIMATE_POSE",
          "localized_name": "unianimate_poses"
        }
      ],
      "flags": {},
      "type": "WanVideoSampler",
      "mode": 0,
      "bgcolor": "#535",
      "size": [
        312.8956298828125,
        804.8956298828125
      ],
      "pos": [
        4610,
        2400
      ],
      "id": 172,
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "2d2a184723dae88388e130659f51c36fcadeaba8",
        "Node name for S&R": "WanVideoSampler",
        "ttNbgOverride": {
          "bgcolor": "#535",
          "groupcolor": "#a1309b",
          "color": "#323"
        }
      },
      "order": 106
    },
    {
      "outputs": [
        {
          "name": "*",
          "label": "*",
          "type": "*"
        }
      ],
      "color": "#323",
      "widgets_values": [
        "prompt"
      ],
      "inputs": [
        {
          "name": "STRING",
          "link": 477,
          "label": "STRING",
          "type": "STRING"
        }
      ],
      "flags": {
        "collapsed": true
      },
      "type": "SetNode",
      "title": "Set_STRING",
      "mode": 0,
      "bgcolor": "#535",
      "size": [
        210,
        58
      ],
      "pos": [
        450,
        500
      ],
      "id": 316,
      "properties": {
        "previousName": "",
        "ttNbgOverride": {
          "bgcolor": "#535",
          "groupcolor": "#a1309b",
          "color": "#323"
        }
      },
      "order": 81
    },
    {
      "outputs": [
        {
          "shape": 3,
          "name": "*",
          "links": [
            480
          ],
          "label": "STRING",
          "dir": 4,
          "type": "STRING"
        }
      ],
      "color": "#323",
      "widgets_values": [],
      "inputs": [
        {
          "name": "any_01",
          "link": 478,
          "label": "any_01",
          "dir": 3,
          "type": "STRING"
        },
        {
          "name": "any_02",
          "link": 479,
          "label": "any_02",
          "dir": 3,
          "type": "STRING"
        },
        {
          "name": "any_03",
          "label": "any_03",
          "dir": 3,
          "type": "STRING"
        },
        {
          "name": "any_04",
          "label": "any_04",
          "dir": 3,
          "type": "STRING"
        },
        {
          "name": "any_05",
          "dir": 3,
          "type": "STRING"
        }
      ],
      "flags": {},
      "type": "Any Switch (rgthree)",
      "mode": 0,
      "bgcolor": "#535",
      "size": [
        252,
        106
      ],
      "pos": [
        3480,
        1470
      ],
      "id": 318,
      "properties": {
        "ttNbgOverride": {
          "bgcolor": "#535",
          "groupcolor": "#a1309b",
          "color": "#323"
        }
      },
      "order": 90
    },
    {
      "outputs": [
        {
          "name": "OPT_CONNECTION",
          "label": "OPT_CONNECTION",
          "type": "*"
        }
      ],
      "color": "#c09430",
      "inputs": [],
      "flags": {},
      "type": "Fast Groups Muter (rgthree)",
      "title": "开启功能",
      "mode": 0,
      "bgcolor": "rgba(24,24,27,.9)",
      "size": [
        290,
        106
      ],
      "pos": [
        -430,
        290
      ],
      "id": 280,
      "properties": {
        "customSortAlphabet": "",
        "matchColors": "",
        "sort": "position",
        "matchTitle": "控制",
        "showNav": true,
        "toggleRestriction": "always one"
      },
      "order": 47
    },
    {
      "outputs": [
        {
          "name": "florence2_model",
          "links": [
            446
          ],
          "label": "florence2_model",
          "type": "FL2MODEL",
          "localized_name": "florence2_model"
        }
      ],
      "color": "#323",
      "widgets_values": [
        "Florence-2-large-PromptGen-v2.0",
        "fp16",
        "sdpa"
      ],
      "inputs": [
        {
          "shape": 7,
          "name": "lora",
          "label": "lora",
          "type": "PEFTLORA",
          "localized_name": "lora"
        }
      ],
      "flags": {},
      "type": "Florence2ModelLoader",
      "mode": 2,
      "bgcolor": "#535",
      "size": [
        315,
        106
      ],
      "pos": [
        2420,
        1400
      ],
      "id": 294,
      "properties": {
        "Node name for S&R": "Florence2ModelLoader",
        "ttNbgOverride": {
          "bgcolor": "#535",
          "groupcolor": "#a1309b",
          "color": "#323"
        }
      },
      "order": 48
    },
    {
      "outputs": [
        {
          "name": "image",
          "links": [],
          "label": "image",
          "type": "IMAGE",
          "localized_name": "image"
        },
        {
          "name": "mask",
          "label": "mask",
          "type": "MASK",
          "localized_name": "mask"
        },
        {
          "name": "caption",
          "links": [
            478
          ],
          "label": "caption",
          "type": "STRING",
          "localized_name": "caption"
        },
        {
          "name": "data",
          "label": "data",
          "type": "JSON",
          "localized_name": "data"
        }
      ],
      "color": "#323",
      "widgets_values": [
        "",
        "detailed_caption",
        true,
        false,
        1024,
        3,
        true,
        "",
        8848,
        "fixed"
      ],
      "inputs": [
        {
          "name": "image",
          "link": 450,
          "label": "image",
          "type": "IMAGE",
          "localized_name": "image"
        },
        {
          "name": "florence2_model",
          "link": 446,
          "label": "florence2_model",
          "type": "FL2MODEL",
          "localized_name": "florence2_model"
        }
      ],
      "flags": {},
      "type": "Florence2Run",
      "mode": 2,
      "bgcolor": "#535",
      "size": [
        400,
        364
      ],
      "pos": [
        2790,
        1390
      ],
      "id": 293,
      "properties": {
        "Node name for S&R": "Florence2Run",
        "ttNbgOverride": {
          "bgcolor": "#535",
          "groupcolor": "#a1309b",
          "color": "#323"
        }
      },
      "order": 73
    },
    {
      "outputs": [
        {
          "name": "OPT_CONNECTION",
          "label": "OPT_CONNECTION",
          "type": "*"
        }
      ],
      "color": "#c09430",
      "inputs": [],
      "flags": {},
      "type": "Fast Groups Muter (rgthree)",
      "title": "开启功能",
      "mode": 0,
      "bgcolor": "rgba(24,24,27,.9)",
      "size": [
        290,
        58
      ],
      "pos": [
        -430,
        440
      ],
      "id": 320,
      "properties": {
        "customSortAlphabet": "",
        "matchColors": "",
        "sort": "position",
        "matchTitle": "自动提示词",
        "showNav": true,
        "toggleRestriction": "default"
      },
      "order": 49
    },
    {
      "outputs": [
        {
          "name": "STRING",
          "links": [
            479
          ],
          "label": "STRING",
          "type": "STRING"
        }
      ],
      "color": "#323",
      "widgets_values": [
        "prompt"
      ],
      "inputs": [],
      "flags": {},
      "type": "GetNode",
      "title": "Get_prompt",
      "mode": 0,
      "bgcolor": "#535",
      "size": [
        210,
        60
      ],
      "pos": [
        3160,
        1200
      ],
      "id": 319,
      "properties": {
        "ttNbgOverride": {
          "bgcolor": "#535",
          "groupcolor": "#a1309b",
          "color": "#323"
        }
      },
      "order": 50
    },
    {
      "outputs": [
        {
          "name": "IMAGE",
          "links": [
            394
          ],
          "label": "IMAGE",
          "type": "IMAGE"
        }
      ],
      "color": "#006691",
      "widgets_values": [
        "img1"
      ],
      "inputs": [],
      "flags": {},
      "type": "GetNode",
      "title": "Get_img1",
      "mode": 0,
      "bgcolor": "rgba(24,24,27,.9)",
      "size": [
        210,
        60
      ],
      "pos": [
        2410,
        2690
      ],
      "id": 263,
      "properties": {},
      "order": 51
    },
    {
      "outputs": [
        {
          "name": "*",
          "links": [
            285
          ],
          "label": "*",
          "type": "*"
        }
      ],
      "color": "#006691",
      "widgets_values": [
        "control_video"
      ],
      "inputs": [],
      "flags": {
        "collapsed": true
      },
      "type": "GetNode",
      "title": "Get_control_video",
      "mode": 0,
      "bgcolor": "rgba(24,24,27,.9)",
      "size": [
        210,
        58
      ],
      "pos": [
        5040,
        2260
      ],
      "id": 154,
      "properties": {},
      "order": 52
    },
    {
      "outputs": [
        {
          "name": "IMAGE",
          "links": [
            393,
            442
          ],
          "label": "IMAGE",
          "type": "IMAGE",
          "localized_name": "IMAGE"
        },
        {
          "name": "width",
          "links": [
            413
          ],
          "label": "width",
          "type": "INT",
          "localized_name": "width"
        },
        {
          "name": "height",
          "links": [
            414
          ],
          "label": "height",
          "type": "INT",
          "localized_name": "height"
        }
      ],
      "color": "#323",
      "widgets_values": [
        512,
        512,
        "nearest",
        "keep proportion",
        "always",
        2
      ],
      "inputs": [
        {
          "name": "image",
          "link": 394,
          "label": "image",
          "type": "IMAGE",
          "localized_name": "image"
        },
        {
          "widget": {
            "name": "width"
          },
          "name": "width",
          "link": 395,
          "label": "width",
          "type": "INT"
        },
        {
          "widget": {
            "name": "height"
          },
          "name": "height",
          "link": 396,
          "label": "height",
          "type": "INT"
        }
      ],
      "flags": {},
      "type": "ImageResize+",
      "mode": 0,
      "bgcolor": "#535",
      "size": [
        315,
        218
      ],
      "pos": [
        2750,
        2660
      ],
      "id": 266,
      "properties": {
        "Node name for S&R": "ImageResize+",
        "ttNbgOverride": {
          "bgcolor": "#535",
          "groupcolor": "#a1309b",
          "color": "#323"
        }
      },
      "order": 72
    },
    {
      "outputs": [
        {
          "name": "images",
          "slot_index": 0,
          "links": [
            361
          ],
          "label": "images",
          "type": "IMAGE",
          "localized_name": "images"
        },
        {
          "name": "masks",
          "slot_index": 1,
          "links": [
            359
          ],
          "label": "masks",
          "type": "MASK",
          "localized_name": "masks"
        }
      ],
      "color": "#323",
      "widgets_values": [
        81,
        0.5
      ],
      "inputs": [
        {
          "shape": 7,
          "name": "start_image",
          "link": 399,
          "label": "start_image",
          "type": "IMAGE",
          "localized_name": "start_image"
        },
        {
          "shape": 7,
          "name": "end_image",
          "label": "end_image",
          "type": "IMAGE",
          "localized_name": "end_image"
        },
        {
          "shape": 7,
          "name": "control_images",
          "link": 356,
          "label": "control_images",
          "type": "IMAGE",
          "localized_name": "control_images"
        },
        {
          "widget": {
            "name": "num_frames"
          },
          "name": "num_frames",
          "link": 387,
          "label": "num_frames",
          "type": "INT"
        },
        {
          "shape": 7,
          "name": "inpaint_mask",
          "label": "inpaint_mask",
          "type": "MASK",
          "localized_name": "inpaint_mask"
        }
      ],
      "flags": {},
      "type": "WanVideoVACEStartToEndFrame",
      "mode": 0,
      "bgcolor": "#535",
      "size": [
        268.79998779296875,
        154
      ],
      "pos": [
        3260,
        3050
      ],
      "id": 197,
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "78559ef1f4462e57fec77dd6a0c2315da08f6f1f",
        "Node name for S&R": "WanVideoVACEStartToEndFrame",
        "ttNbgOverride": {
          "bgcolor": "#535",
          "groupcolor": "#a1309b",
          "color": "#323"
        }
      },
      "order": 103
    },
    {
      "outputs": [
        {
          "name": "IMAGE",
          "links": [
            329
          ],
          "label": "IMAGE",
          "type": "IMAGE"
        }
      ],
      "color": "#2a363b",
      "widgets_values": [
        "reference_image"
      ],
      "inputs": [
        {
          "name": "IMAGE",
          "link": 415,
          "label": "IMAGE",
          "type": "IMAGE"
        }
      ],
      "flags": {
        "collapsed": false
      },
      "type": "SetNode",
      "title": "Set_reference_image",
      "mode": 0,
      "bgcolor": "#3f5159",
      "size": [
        210,
        60
      ],
      "pos": [
        3920,
        2780
      ],
      "id": 179,
      "properties": {
        "previousName": "reference_image"
      },
      "order": 98
    },
    {
      "outputs": [
        {
          "name": "IMAGE",
          "links": [
            415
          ],
          "label": "IMAGE",
          "type": "IMAGE",
          "localized_name": "IMAGE"
        },
        {
          "name": "width",
          "links": [],
          "label": "width",
          "type": "INT",
          "localized_name": "width"
        },
        {
          "name": "height",
          "links": [],
          "label": "height",
          "type": "INT",
          "localized_name": "height"
        }
      ],
      "color": "#323",
      "widgets_values": [
        512,
        512,
        "nearest",
        "keep proportion",
        "always",
        2
      ],
      "inputs": [
        {
          "name": "image",
          "link": 481,
          "label": "image",
          "type": "IMAGE",
          "localized_name": "image"
        },
        {
          "widget": {
            "name": "width"
          },
          "name": "width",
          "link": 413,
          "label": "width",
          "type": "INT"
        },
        {
          "widget": {
            "name": "height"
          },
          "name": "height",
          "link": 414,
          "label": "height",
          "type": "INT"
        }
      ],
      "flags": {},
      "type": "ImageResize+",
      "mode": 0,
      "bgcolor": "#535",
      "size": [
        315,
        218
      ],
      "pos": [
        3180,
        2740
      ],
      "id": 269,
      "properties": {
        "Node name for S&R": "ImageResize+",
        "ttNbgOverride": {
          "bgcolor": "#535",
          "groupcolor": "#a1309b",
          "color": "#323"
        }
      },
      "order": 89
    },
    {
      "outputs": [
        {
          "name": "*",
          "slot_index": 0,
          "links": [
            356
          ],
          "label": "*",
          "type": "*"
        }
      ],
      "color": "#006691",
      "widgets_values": [
        "control_video"
      ],
      "inputs": [
        {
          "name": "*",
          "link": 431,
          "label": "*",
          "type": "*"
        }
      ],
      "flags": {
        "collapsed": false
      },
      "type": "SetNode",
      "title": "Set_control_video",
      "mode": 0,
      "bgcolor": "rgba(24,24,27,.9)",
      "size": [
        210,
        60
      ],
      "pos": [
        3180,
        2540
      ],
      "id": 180,
      "properties": {
        "previousName": "control_video"
      },
      "order": 102
    },
    {
      "outputs": [
        {
          "shape": 3,
          "name": "*",
          "links": [
            431
          ],
          "label": "IMAGE",
          "dir": 4,
          "type": "IMAGE"
        }
      ],
      "color": "#323",
      "widgets_values": [],
      "inputs": [
        {
          "name": "any_01",
          "link": 445,
          "label": "any_01",
          "dir": 3,
          "type": "IMAGE"
        },
        {
          "name": "any_02",
          "link": 430,
          "label": "any_02",
          "dir": 3,
          "type": "IMAGE"
        },
        {
          "name": "any_03",
          "label": "any_03",
          "dir": 3,
          "type": "IMAGE"
        },
        {
          "name": "any_04",
          "label": "any_04",
          "dir": 3,
          "type": "IMAGE"
        },
        {
          "name": "any_05",
          "dir": 3,
          "type": "IMAGE"
        }
      ],
      "flags": {},
      "type": "Any Switch (rgthree)",
      "mode": 0,
      "bgcolor": "#535",
      "size": [
        252,
        106
      ],
      "pos": [
        3050,
        2170
      ],
      "id": 279,
      "properties": {
        "ttNbgOverride": {
          "bgcolor": "#535",
          "groupcolor": "#a1309b",
          "color": "#323"
        }
      },
      "order": 97
    },
    {
      "outputs": [
        {
          "name": "INT",
          "links": [
            395,
            396,
            444,
            495,
            496
          ],
          "label": "INT",
          "type": "INT"
        }
      ],
      "color": "#1b4669",
      "widgets_values": [
        "size"
      ],
      "inputs": [],
      "flags": {},
      "type": "GetNode",
      "title": "Get_size",
      "mode": 0,
      "bgcolor": "#29699c",
      "size": [
        210,
        60
      ],
      "pos": [
        2410,
        2550
      ],
      "id": 267,
      "properties": {},
      "order": 53
    },
    {
      "outputs": [
        {
          "name": "IMAGE",
          "links": [
            399
          ],
          "label": "IMAGE",
          "type": "IMAGE",
          "localized_name": "IMAGE"
        },
        {
          "name": "width",
          "links": [],
          "label": "width",
          "type": "INT",
          "localized_name": "width"
        },
        {
          "name": "height",
          "links": [],
          "label": "height",
          "type": "INT",
          "localized_name": "height"
        }
      ],
      "color": "#323",
      "widgets_values": [
        512,
        512,
        "nearest",
        "keep proportion",
        "always",
        2
      ],
      "inputs": [
        {
          "name": "image",
          "link": 482,
          "label": "image",
          "type": "IMAGE",
          "localized_name": "image"
        },
        {
          "widget": {
            "name": "width"
          },
          "name": "width",
          "link": 495,
          "label": "width",
          "type": "INT"
        },
        {
          "widget": {
            "name": "height"
          },
          "name": "height",
          "link": 496,
          "label": "height",
          "type": "INT"
        }
      ],
      "flags": {},
      "type": "ImageResize+",
      "mode": 0,
      "bgcolor": "#535",
      "size": [
        315,
        218
      ],
      "pos": [
        2750,
        3470
      ],
      "id": 268,
      "properties": {
        "Node name for S&R": "ImageResize+",
        "ttNbgOverride": {
          "bgcolor": "#535",
          "groupcolor": "#a1309b",
          "color": "#323"
        }
      },
      "order": 74
    },
    {
      "outputs": [
        {
          "name": "vace_embeds",
          "links": [
            304
          ],
          "label": "vace_embeds",
          "type": "WANVIDIMAGE_EMBEDS",
          "localized_name": "vace_embeds"
        }
      ],
      "color": "#322",
      "widgets_values": [
        480,
        832,
        29,
        1.0000000000000002,
        0,
        1,
        false
      ],
      "inputs": [
        {
          "name": "vae",
          "link": 276,
          "label": "vae",
          "type": "WANVAE",
          "localized_name": "vae"
        },
        {
          "shape": 7,
          "name": "input_frames",
          "link": 322,
          "label": "input_frames",
          "type": "IMAGE",
          "localized_name": "input_frames"
        },
        {
          "shape": 7,
          "name": "ref_images",
          "link": 329,
          "label": "ref_images",
          "type": "IMAGE",
          "localized_name": "ref_images"
        },
        {
          "shape": 7,
          "name": "input_masks",
          "link": 359,
          "label": "input_masks",
          "type": "MASK",
          "localized_name": "input_masks"
        },
        {
          "widget": {
            "name": "num_frames"
          },
          "name": "num_frames",
          "link": 280,
          "label": "num_frames",
          "type": "INT"
        },
        {
          "widget": {
            "name": "width"
          },
          "name": "width",
          "link": 281,
          "label": "width",
          "type": "INT"
        },
        {
          "widget": {
            "name": "height"
          },
          "name": "height",
          "link": 282,
          "label": "height",
          "type": "INT"
        },
        {
          "shape": 7,
          "name": "prev_vace_embeds",
          "label": "prev_vace_embeds",
          "type": "WANVIDIMAGE_EMBEDS",
          "localized_name": "prev_vace_embeds"
        }
      ],
      "flags": {},
      "type": "WanVideoVACEEncode",
      "mode": 0,
      "bgcolor": "#533",
      "size": [
        343.59088134765625,
        342
      ],
      "pos": [
        4220,
        2440
      ],
      "id": 148,
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "3869b0482b615b6a8fd6f346467c5ef6627eed72",
        "Node name for S&R": "WanVideoVACEEncode"
      },
      "order": 105
    },
    {
      "outputs": [],
      "color": "#fff0",
      "shape": 1,
      "inputs": [],
      "flags": {
        "allow_interaction": true
      },
      "type": "Label (rgthree)",
      "title": "载入参考风格",
      "mode": 0,
      "bgcolor": "#fff0",
      "size": [
        300,
        50
      ],
      "pos": [
        370,
        -480
      ],
      "id": 249,
      "properties": {
        "padding": 0,
        "backgroundColor": "transparent",
        "fontFamily": "Arial",
        "borderRadius": 0,
        "textAlign": "left",
        "fontSize": 50,
        "fontColor": "#ffffff"
      },
      "order": 54
    },
    {
      "outputs": [
        {
          "name": "IMAGE",
          "links": [
            450,
            481,
            482
          ],
          "label": "IMAGE",
          "type": "IMAGE"
        }
      ],
      "color": "#006691",
      "widgets_values": [
        "img2"
      ],
      "inputs": [],
      "flags": {},
      "type": "GetNode",
      "title": "Get_img2",
      "mode": 0,
      "bgcolor": "rgba(24,24,27,.9)",
      "size": [
        210,
        60
      ],
      "pos": [
        2410,
        3110
      ],
      "id": 261,
      "properties": {},
      "order": 55
    },
    {
      "outputs": [
        {
          "name": "IMAGE",
          "links": [
            445
          ],
          "label": "IMAGE",
          "type": "IMAGE",
          "localized_name": "IMAGE"
        },
        {
          "name": "POSE_KEYPOINT",
          "label": "POSE_KEYPOINT",
          "type": "POSE_KEYPOINT",
          "localized_name": "POSE_KEYPOINT"
        }
      ],
      "color": "#323",
      "widgets_values": [
        "enable",
        "enable",
        "enable",
        512,
        "yolox_l.torchscript.pt",
        "dw-ll_ucoco_384_bs5.torchscript.pt",
        "disable"
      ],
      "inputs": [
        {
          "name": "image",
          "link": 442,
          "label": "image",
          "type": "IMAGE",
          "localized_name": "image"
        },
        {
          "widget": {
            "name": "resolution"
          },
          "shape": 7,
          "name": "resolution",
          "link": 444,
          "label": "resolution",
          "type": "INT"
        }
      ],
      "flags": {},
      "type": "DWPreprocessor",
      "mode": 0,
      "bgcolor": "#535",
      "size": [
        315,
        222
      ],
      "pos": [
        2620,
        1970
      ],
      "id": 290,
      "properties": {
        "cnr_id": "comfyui_controlnet_aux",
        "ver": "fc5c5c44de592854119ba83d3d42b85a27255cc4",
        "Node name for S&R": "DWPreprocessor",
        "ttNbgOverride": {
          "bgcolor": "#535",
          "groupcolor": "#a1309b",
          "color": "#323"
        }
      },
      "order": 88
    },
    {
      "outputs": [
        {
          "name": "IMAGE",
          "links": [
            498
          ],
          "label": "IMAGE",
          "type": "IMAGE",
          "localized_name": "IMAGE"
        }
      ],
      "color": "#323",
      "widgets_values": [
        0,
        1
      ],
      "inputs": [
        {
          "name": "image",
          "link": 497,
          "label": "image",
          "type": "IMAGE",
          "localized_name": "image"
        }
      ],
      "flags": {},
      "type": "ImageFromBatch",
      "mode": 0,
      "bgcolor": "#535",
      "size": [
        315,
        82
      ],
      "pos": [
        -570,
        1540
      ],
      "id": 326,
      "properties": {
        "Node name for S&R": "ImageFromBatch",
        "ttNbgOverride": {
          "bgcolor": "#535",
          "groupcolor": "#a1309b",
          "color": "#323"
        }
      },
      "order": 75
    },
    {
      "outputs": [],
      "color": "#323",
      "widgets_values": [
        ""
      ],
      "inputs": [
        {
          "name": "images",
          "link": 498,
          "label": "images",
          "type": "IMAGE",
          "localized_name": "images"
        }
      ],
      "flags": {},
      "type": "PreviewImage",
      "mode": 0,
      "bgcolor": "#535",
      "size": [
        340,
        520
      ],
      "pos": [
        -160,
        1430
      ],
      "id": 327,
      "properties": {
        "Node name for S&R": "PreviewImage",
        "ttNbgOverride": {
          "bgcolor": "#535",
          "groupcolor": "#a1309b",
          "color": "#323"
        }
      },
      "order": 91
    },
    {
      "outputs": [
        {
          "name": "IMAGE",
          "slot_index": 0,
          "links": [
            497
          ],
          "label": "IMAGE",
          "type": "IMAGE"
        }
      ],
      "color": "#006691",
      "widgets_values": [
        "img1"
      ],
      "inputs": [],
      "flags": {},
      "type": "GetNode",
      "title": "Get_img1",
      "mode": 0,
      "bgcolor": "rgba(24,24,27,.9)",
      "size": [
        210,
        58
      ],
      "pos": [
        -830,
        1410
      ],
      "id": 328,
      "properties": {},
      "order": 56
    },
    {
      "outputs": [
        {
          "shape": 3,
          "name": "STRING",
          "slot_index": 0,
          "links": [
            370
          ],
          "label": "STRING",
          "type": "STRING",
          "localized_name": "STRING"
        }
      ],
      "color": "#c09430",
      "widgets_values": [
        "Name"
      ],
      "inputs": [],
      "flags": {},
      "type": "String Literal",
      "title": "保存图片的名称 保存到“output/视频” 文件夹里面",
      "mode": 0,
      "bgcolor": "rgba(24,24,27,.9)",
      "size": [
        330,
        93
      ],
      "pos": [
        -440,
        580
      ],
      "id": 243,
      "properties": {
        "cnr_id": "image-saver",
        "ver": "65e6903eff274a50f8b5cd768f0f96baf37baea1",
        "aux_id": "giriss/comfy-image-saver",
        "Node name for S&R": "String Literal"
      },
      "order": 57
    },
    {
      "outputs": [
        {
          "name": "IMAGE",
          "links": [
            378
          ],
          "label": "IMAGE",
          "type": "IMAGE",
          "localized_name": "IMAGE"
        },
        {
          "name": "MASK",
          "label": "MASK",
          "type": "MASK",
          "localized_name": "MASK"
        }
      ],
      "color": "#422342",
      "widgets_values": [
        "bd40f615ae8b8e71305f4fd25828920d81753457b2ea1fc78bbce018073569a0.webp",
        "image",
        ""
      ],
      "inputs": [],
      "flags": {},
      "type": "LoadImage",
      "title": "载入参考图片2",
      "mode": 0,
      "bgcolor": "rgba(24,24,27,.9)",
      "size": [
        410,
        660
      ],
      "pos": [
        320,
        -290
      ],
      "id": 255,
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.26",
        "Node name for S&R": "LoadImage"
      },
      "order": 58
    },
    {
      "outputs": [
        {
          "name": "wan_t5_model",
          "slot_index": 0,
          "links": [
            366
          ],
          "label": "wan_t5_model",
          "type": "WANTEXTENCODER",
          "localized_name": "wan_t5_model"
        }
      ],
      "color": "#422342",
      "widgets_values": [
        "umt5-xxl-enc-bf16.safetensors",
        "bf16",
        "offload_device",
        "disabled"
      ],
      "inputs": [],
      "flags": {},
      "type": "LoadWanVideoT5TextEncoder",
      "mode": 0,
      "bgcolor": "rgba(24,24,27,.9)",
      "size": [
        330,
        130
      ],
      "pos": [
        1360,
        2120
      ],
      "id": 202,
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "d9b1f4d1a5aea91d101ae97a54714a5861af3f50",
        "Node name for S&R": "LoadWanVideoT5TextEncoder"
      },
      "order": 60
    },
    {
      "outputs": [
        {
          "name": "vae",
          "slot_index": 0,
          "links": [
            365
          ],
          "label": "vae",
          "type": "WANVAE",
          "localized_name": "vae"
        }
      ],
      "color": "#422342",
      "widgets_values": [
        "wan_2.1_vae.safetensors",
        "bf16"
      ],
      "inputs": [],
      "flags": {},
      "type": "WanVideoVAELoader",
      "mode": 0,
      "bgcolor": "rgba(24,24,27,.9)",
      "size": [
        320,
        82
      ],
      "pos": [
        1370,
        2310
      ],
      "id": 203,
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "d9b1f4d1a5aea91d101ae97a54714a5861af3f50",
        "Node name for S&R": "WanVideoVAELoader"
      },
      "order": 61
    },
    {
      "outputs": [
        {
          "name": "positive",
          "links": [
            477
          ],
          "label": "positive",
          "type": "STRING",
          "localized_name": "positive"
        }
      ],
      "color": "#346434",
      "widgets_values": [
        "美女在跳舞"
      ],
      "inputs": [],
      "flags": {},
      "type": "easy positive",
      "title": "提示词",
      "mode": 0,
      "bgcolor": "rgba(24,24,27,.9)",
      "size": [
        400,
        280
      ],
      "pos": [
        320,
        430
      ],
      "id": 317,
      "properties": {
        "Node name for S&R": "easy positive"
      },
      "order": 62
    },
    {
      "outputs": [
        {
          "name": "seed",
          "slot_index": 0,
          "links": [
            368
          ],
          "label": "seed",
          "type": "INT",
          "localized_name": "seed"
        }
      ],
      "color": "#006691",
      "widgets_values": [
        26,
        "increment",
        null
      ],
      "inputs": [],
      "flags": {},
      "type": "easy seed",
      "mode": 0,
      "bgcolor": "rgba(24,24,27,.9)",
      "size": [
        290,
        110
      ],
      "pos": [
        -430,
        -270
      ],
      "id": 253,
      "properties": {
        "Node name for S&R": "easy seed"
      },
      "order": 63
    },
    {
      "outputs": [
        {
          "name": "int",
          "slot_index": 0,
          "links": [
            392
          ],
          "label": "int",
          "type": "INT",
          "localized_name": "int"
        }
      ],
      "color": "#346434",
      "widgets_values": [
        0
      ],
      "inputs": [],
      "flags": {
        "collapsed": false
      },
      "type": "easy int",
      "title": "跳过视频前多少帧",
      "mode": 0,
      "bgcolor": "rgba(24,24,27,.9)",
      "size": [
        290,
        58
      ],
      "pos": [
        -430,
        30
      ],
      "id": 265,
      "properties": {
        "Node name for S&R": "easy int"
      },
      "order": 64
    },
    {
      "outputs": [],
      "color": "#a21515",
      "widgets_values": [
        "#  Wan2.1 VACE视频转绘\n\n这工作流 会保持参考风格图片（包括人物和背景） 进行模仿视频动作生成\n\n\n## 用法：\n1. 载入视频1 和参考图片\n2. 输入提示词 \n3. 生成即可\n## 功能：\n1. 姿势控制：用openpose来控制视频\n2. 深度控制：用depth深度图来控制视频\n3. 自动提示词： 用florence2进行图片提示词反推 不开启就需要手动输入提示词\n\n## 参数：\n1. 随机种子：改变随机种子会改变生成结果\n2. 限制分辨率：图片\\视频的最大的宽高不会超过设置的值 另一边会等比的缩放\n3. 跳过视频前多少帧： 根据视频原来的帧数来控制 例如原视频30帧一秒  这里设置30 就是跳过前1秒 \n4. 生成视频的时长： 这里根据视频模型来设置 例如wan2.1官方例子生成时长为81帧 每秒帧数是16 最后出来的是5秒视频\n6. 正面提示词： 控制生成图片\\视频的词 根据上传的图片输入合理的描述\n\n## 注意：\n\n1. **载入视频**节点的force_rate 决定视频的每秒帧数 输入16就是每秒16帧\n\n1. **载入视频**节点的  frame_load_cap 和skip_first_frames 只是作为预览参考 \n最终决定跳过帧和视频生成帧 是绿色的参数按钮\n\n1. 保存位置 \n\n视频将会保存到“output/视频” 文件夹里面\n\n2. 视频加速\n\n如果你comfyui没有安装triton 和sageattn 那么请把\nwan2.1图生视频的 WanVideo Torch Compile Settings 删掉\n把 WanVideo Model Loader的attention_mode 改成sdpa\n否则会出错\n\n如果你显存低生成不了 可以在WanVideo BlockSwap 设置 blocks_to_swap 到30~40 这样虽然慢一点 但是起码能生成"
      ],
      "inputs": [],
      "flags": {},
      "type": "MarkdownNote",
      "title": "使用前先看！！！！！！！！！！！",
      "mode": 0,
      "bgcolor": "#8e0101",
      "size": [
        570,
        830
      ],
      "pos": [
        -1030,
        -30
      ],
      "id": 254,
      "properties": {},
      "order": 65
    },
    {
      "outputs": [
        {
          "name": "int",
          "slot_index": 0,
          "links": [
            380
          ],
          "label": "int",
          "type": "INT",
          "localized_name": "int"
        }
      ],
      "color": "#006691",
      "widgets_values": [
        1024
      ],
      "inputs": [],
      "flags": {
        "collapsed": false
      },
      "type": "easy int",
      "title": "限制分辨率",
      "mode": 0,
      "bgcolor": "rgba(24,24,27,.9)",
      "size": [
        290,
        58
      ],
      "pos": [
        -430,
        -100
      ],
      "id": 250,
      "properties": {
        "Node name for S&R": "easy int"
      },
      "order": 66
    },
    {
      "outputs": [
        {
          "name": "Filenames",
          "label": "Filenames",
          "type": "VHS_FILENAMES",
          "localized_name": "Filenames"
        }
      ],
      "color": "#af3535",
      "widgets_values": {
        "save_output": true,
        "filename_prefix": "WanVideoWrapper_VACE_startendframe",
        "loop_count": 0,
        "pix_fmt": "yuv420p",
        "save_metadata": true,
        "crf": 19,
        "trim_to_audio": false,
        "videopreview": {
          "paused": false,
          "hidden": false,
          "params": {
            "filename": "Name_WAN-VACE_00001_tazjg_1747807016.mp4",
            "workflow": "Name_WAN-VACE_00001.png",
            "fullpath": "/data/ComfyUI/personal/71ea1a54c47729a6246e83fcdff2f139/output/视频/Name_WAN-VACE_00001.mp4",
            "format": "video/h264-mp4",
            "subfolder": "视频",
            "type": "output",
            "frame_rate": 24
          }
        },
        "format": "video/h264-mp4",
        "frame_rate": 16,
        "pingpong": false
      },
      "inputs": [
        {
          "name": "images",
          "link": 424,
          "label": "images",
          "type": "IMAGE",
          "localized_name": "images"
        },
        {
          "shape": 7,
          "name": "audio",
          "label": "audio",
          "type": "AUDIO",
          "localized_name": "audio"
        },
        {
          "shape": 7,
          "name": "meta_batch",
          "label": "meta_batch",
          "type": "VHS_BatchManager",
          "localized_name": "meta_batch"
        },
        {
          "shape": 7,
          "name": "vae",
          "label": "vae",
          "type": "VAE",
          "localized_name": "vae"
        },
        {
          "widget": {
            "name": "filename_prefix"
          },
          "name": "filename_prefix",
          "link": 423,
          "label": "filename_prefix",
          "type": "STRING"
        },
        {
          "widget": {
            "name": "frame_rate"
          },
          "name": "frame_rate",
          "link": 436,
          "label": "frame_rate",
          "type": "FLOAT,INT"
        }
      ],
      "flags": {},
      "type": "VHS_VideoCombine",
      "title": "视频将会保存到“output/视频” 文件夹里面",
      "mode": 0,
      "bgcolor": "rgba(24,24,27,.9)",
      "size": [
        605.903076171875,
        1389.60546875
      ],
      "pos": [
        1410,
        -280
      ],
      "id": 200,
      "properties": {
        "cnr_id": "comfyui-videohelpersuite",
        "ver": "0a75c7958fe320efcb052f1d9f8451fd20c730a8",
        "Node name for S&R": "VHS_VideoCombine"
      },
      "order": 101
    },
    {
      "outputs": [
        {
          "name": "Filenames",
          "label": "Filenames",
          "type": "VHS_FILENAMES",
          "localized_name": "Filenames"
        }
      ],
      "color": "#af3535",
      "widgets_values": {
        "save_output": true,
        "filename_prefix": "WanVideoWrapper_VACE_startendframe",
        "loop_count": 0,
        "pix_fmt": "yuv420p",
        "save_metadata": true,
        "crf": 19,
        "trim_to_audio": false,
        "videopreview": {
          "paused": false,
          "hidden": false,
          "params": {
            "filename": "Name_WAN-VACE_00002_pjdxv_1747807024.mp4",
            "workflow": "Name_WAN-VACE_00002.png",
            "fullpath": "/data/ComfyUI/personal/71ea1a54c47729a6246e83fcdff2f139/output/视频/Name_WAN-VACE_00002.mp4",
            "format": "video/h264-mp4",
            "subfolder": "视频",
            "type": "output",
            "frame_rate": 24
          }
        },
        "format": "video/h264-mp4",
        "frame_rate": 16,
        "pingpong": false
      },
      "inputs": [
        {
          "name": "images",
          "link": 427,
          "label": "images",
          "type": "IMAGE",
          "localized_name": "images"
        },
        {
          "shape": 7,
          "name": "audio",
          "label": "audio",
          "type": "AUDIO",
          "localized_name": "audio"
        },
        {
          "shape": 7,
          "name": "meta_batch",
          "label": "meta_batch",
          "type": "VHS_BatchManager",
          "localized_name": "meta_batch"
        },
        {
          "shape": 7,
          "name": "vae",
          "label": "vae",
          "type": "VAE",
          "localized_name": "vae"
        },
        {
          "widget": {
            "name": "filename_prefix"
          },
          "name": "filename_prefix",
          "link": 428,
          "label": "filename_prefix",
          "type": "STRING"
        },
        {
          "widget": {
            "name": "frame_rate"
          },
          "name": "frame_rate",
          "link": 435,
          "label": "frame_rate",
          "type": "FLOAT,INT"
        }
      ],
      "flags": {},
      "type": "VHS_VideoCombine",
      "title": "视频将会保存到“output/视频” 文件夹里面",
      "mode": 0,
      "bgcolor": "rgba(24,24,27,.9)",
      "size": [
        605.903076171875,
        1044.0147705078125
      ],
      "pos": [
        760,
        -290
      ],
      "id": 165,
      "properties": {
        "cnr_id": "comfyui-videohelpersuite",
        "ver": "0a75c7958fe320efcb052f1d9f8451fd20c730a8",
        "Node name for S&R": "VHS_VideoCombine"
      },
      "order": 100
    },
    {
      "outputs": [
        {
          "name": "IMAGE",
          "slot_index": 0,
          "links": [
            389
          ],
          "label": "IMAGE",
          "type": "IMAGE",
          "localized_name": "IMAGE"
        },
        {
          "name": "frame_count",
          "slot_index": 1,
          "links": [
            383
          ],
          "label": "frame_count",
          "type": "INT",
          "localized_name": "frame_count"
        },
        {
          "name": "audio",
          "label": "audio",
          "type": "AUDIO",
          "localized_name": "audio"
        },
        {
          "name": "video_info",
          "links": [
            434
          ],
          "label": "video_info",
          "type": "VHS_VIDEOINFO",
          "localized_name": "video_info"
        }
      ],
      "color": "#422342",
      "widgets_values": {
        "custom_height": 0,
        "force_rate": 16,
        "custom_width": 0,
        "select_every_nth": 1,
        "frame_load_cap": 0,
        "videopreview": {
          "paused": false,
          "hidden": false,
          "params": {
            "custom_height": 0,
            "filename": "00cfce02e5cf6bd546120a3e89bd355494e6521d5670db439e8366c60e97ed91.mp4",
            "force_rate": 16,
            "custom_width": 0,
            "select_every_nth": 1,
            "frame_load_cap": 0,
            "format": "video/mp4",
            "skip_first_frames": 0,
            "type": "input"
          }
        },
        "format": "AnimateDiff",
        "video": "00cfce02e5cf6bd546120a3e89bd355494e6521d5670db439e8366c60e97ed91.mp4",
        "skip_first_frames": 0,
        "force_size": "Disabled",
        "choose video to upload": "image"
      },
      "inputs": [
        {
          "shape": 7,
          "name": "meta_batch",
          "label": "meta_batch",
          "type": "VHS_BatchManager",
          "localized_name": "meta_batch"
        },
        {
          "shape": 7,
          "name": "vae",
          "label": "vae",
          "type": "VAE",
          "localized_name": "vae"
        },
        {
          "widget": {
            "name": "frame_load_cap"
          },
          "name": "frame_load_cap",
          "link": 391,
          "label": "frame_load_cap",
          "type": "INT"
        },
        {
          "widget": {
            "name": "skip_first_frames"
          },
          "name": "skip_first_frames",
          "link": 392,
          "label": "skip_first_frames",
          "type": "INT"
        }
      ],
      "flags": {},
      "type": "VHS_LoadVideo",
      "mode": 0,
      "bgcolor": "rgba(24,24,27,.9)",
      "size": [
        390,
        1005.7777709960938
      ],
      "pos": [
        -100,
        -290
      ],
      "id": 173,
      "properties": {
        "cnr_id": "comfyui-videohelpersuite",
        "ver": "0a75c7958fe320efcb052f1d9f8451fd20c730a8",
        "Node name for S&R": "VHS_LoadVideo"
      },
      "order": 85
    },
    {
      "outputs": [
        {
          "name": "vace_model",
          "links": [
            417
          ],
          "label": "vace_model",
          "type": "VACEPATH",
          "localized_name": "vace_model"
        }
      ],
      "color": "#323",
      "widgets_values": [
        "WAN\\Wan2_1_VACE_1_3B_preview_bf16.safetensors"
      ],
      "inputs": [],
      "flags": {},
      "type": "WanVideoVACEModelSelect",
      "mode": 4,
      "bgcolor": "#535",
      "size": [
        510,
        200
      ],
      "pos": [
        680,
        2200
      ],
      "id": 271,
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "7d238261361608683ae6627aec6994cb69554ca7",
        "Node name for S&R": "WanVideoVACEModelSelect",
        "ttNbgOverride": {
          "bgcolor": "#535",
          "groupcolor": "#a1309b",
          "color": "#323"
        }
      },
      "order": 59
    },
    {
      "outputs": [
        {
          "name": "model",
          "slot_index": 0,
          "links": [
            367
          ],
          "label": "model",
          "type": "WANVIDEOMODEL",
          "localized_name": "model"
        }
      ],
      "color": "#422342",
      "widgets_values": [
        "VACE-Wan2.1-1.3B-Preview.safetensors",
        "bf16",
        "disabled",
        "offload_device",
        "sageattn"
      ],
      "inputs": [
        {
          "shape": 7,
          "name": "compile_args",
          "link": 437,
          "label": "compile_args",
          "type": "WANCOMPILEARGS",
          "localized_name": "compile_args"
        },
        {
          "shape": 7,
          "name": "block_swap_args",
          "link": 438,
          "label": "block_swap_args",
          "type": "BLOCKSWAPARGS",
          "localized_name": "block_swap_args"
        },
        {
          "shape": 7,
          "name": "lora",
          "label": "lora",
          "type": "WANVIDLORA",
          "localized_name": "lora"
        },
        {
          "shape": 7,
          "name": "vram_management_args",
          "label": "vram_management_args",
          "type": "VRAM_MANAGEMENTARGS",
          "localized_name": "vram_management_args"
        },
        {
          "shape": 7,
          "name": "vace_model",
          "link": 417,
          "label": "vace_model",
          "type": "VACEPATH",
          "localized_name": "vace_model"
        },
        {
          "shape": 7,
          "name": "fantasytalking_model",
          "label": "fantasytalking_model",
          "type": "FANTASYTALKINGMODEL",
          "localized_name": "fantasytalking_model"
        }
      ],
      "flags": {},
      "type": "WanVideoModelLoader",
      "mode": 0,
      "bgcolor": "rgba(24,24,27,.9)",
      "size": [
        390,
        254
      ],
      "pos": [
        1300,
        1820
      ],
      "id": 211,
      "properties": {
        "cnr_id": "ComfyUI-WanVideoWrapper",
        "ver": "d9b1f4d1a5aea91d101ae97a54714a5861af3f50",
        "Node name for S&R": "WanVideoModelLoader"
      },
      "order": 78
    },
    {
      "outputs": [
        {
          "name": "int",
          "slot_index": 0,
          "links": [
            382,
            391
          ],
          "label": "int",
          "type": "INT",
          "localized_name": "int"
        }
      ],
      "color": "#346434",
      "widgets_values": [
        41
      ],
      "inputs": [],
      "flags": {
        "collapsed": false
      },
      "type": "easy int",
      "title": "生成视频的时长",
      "mode": 0,
      "bgcolor": "rgba(24,24,27,.9)",
      "size": [
        290,
        58
      ],
      "pos": [
        -430,
        160
      ],
      "id": 242,
      "properties": {
        "Node name for S&R": "easy int"
      },
      "order": 67
    }
  ],
  "extra": {
    "VHS_KeepIntermediate": true,
    "VHS_MetadataImage": true,
    "ue_links": [],
    "0246.VERSION": [
      0,
      0,
      4
    ],
    "VHS_latentpreviewrate": 0,
    "VHS_latentpreview": false,
    "node_versions": {
      "rgthree-comfy": "cb3612624037ad50d76a8caf44ed58694648e245",
      "comfyui_controlnet_aux": "1.0.6",
      "ComfyUI-WanVideoWrapper": "cc8450b1a7f57d5a8ab25ba3dd040847056a95f4",
      "comfyui-easy-use": "b1a875b151f3fd76542cdcb9269961ad330dd5ef",
      "comfy-image-saver": "65e6903eff274a50f8b5cd768f0f96baf37baea1",
      "comfyui-videohelpersuite": "972c87da577b47211c4e9aeed30dc38c7bae607f",
      "comfyui-depthanythingv2": "003d7b44bafd3a8a4c3693a9ca3ddcd72f4883ab",
      "comfyui-florence2": "257fec56102cf42c7e5a28920b6d1258983ae71c",
      "comfy-core": "0.3.27",
      "comfyui-kjnodes": "0addfc6101f7a834c7fb6e0a1b26529360ab5350",
      "comfyui_essentials": "33ff89fd354d8ec3ab6affb605a79a931b445d99"
    },
    "ds": {
      "offset": [
        682.9555103043151,
        422.021245099213
      ],
      "scale": 0.6588450000000022
    }
  },
  "groups": [
    {
      "color": "#3f789e",
      "font_size": 24,
      "flags": {},
      "id": 3,
      "title": "采样",
      "bounding": [
        2390,
        1830,
        3673.4267578125,
        1979.1768798828125
      ]
    },
    {
      "color": "#88A",
      "font_size": 24,
      "flags": {},
      "id": 4,
      "title": "模型加载",
      "bounding": [
        370,
        1320,
        1873.1846923828125,
        1086.119140625
      ]
    },
    {
      "color": "#3f789e",
      "font_size": 50,
      "flags": {},
      "id": 5,
      "title": "工作区",
      "bounding": [
        -450,
        -410,
        2640,
        1250
      ]
    },
    {
      "color": "#b58b2a",
      "font_size": 200,
      "flags": {},
      "id": 6,
      "title": "Wan2.1 VACE视频转绘  按数字1跳转到工作区",
      "bounding": [
        -1020,
        -960,
        4100,
        280
      ]
    },
    {
      "color": "#b58b2a",
      "font_size": 24,
      "flags": {},
      "id": 7,
      "title": "姿势控制",
      "bounding": [
        2580,
        1890,
        380,
        310
      ]
    },
    {
      "color": "#b58b2a",
      "font_size": 24,
      "flags": {},
      "id": 8,
      "title": "深度控制",
      "bounding": [
        2580,
        2230,
        394.20001220703125,
        249.60000610351562
      ]
    },
    {
      "color": "#3f789e",
      "font_size": 24,
      "flags": {},
      "id": 9,
      "title": "自动提示词",
      "bounding": [
        2370,
        1310,
        1030,
        447.6000061035156
      ]
    },
    {
      "color": "#3f789e",
      "font_size": 24,
      "flags": {},
      "id": 10,
      "title": "获得第一帧",
      "bounding": [
        -840,
        1300,
        1074.17578125,
        689.0995483398438
      ]
    }
  ],
  "links": [
    [
      276,
      142,
      0,
      148,
      0,
      "WANVAE"
    ],
    [
      280,
      145,
      3,
      148,
      4,
      "INT"
    ],
    [
      281,
      145,
      1,
      148,
      5,
      "INT"
    ],
    [
      282,
      145,
      2,
      148,
      6,
      "INT"
    ],
    [
      283,
      159,
      2,
      155,
      0,
      "INT"
    ],
    [
      285,
      154,
      0,
      157,
      0,
      "IMAGE"
    ],
    [
      286,
      159,
      0,
      158,
      0,
      "IMAGE"
    ],
    [
      287,
      155,
      0,
      158,
      1,
      "IMAGE"
    ],
    [
      288,
      160,
      0,
      158,
      2,
      "IMAGE"
    ],
    [
      289,
      167,
      0,
      159,
      0,
      "IMAGE"
    ],
    [
      290,
      156,
      0,
      160,
      0,
      "IMAGE"
    ],
    [
      291,
      157,
      0,
      160,
      1,
      "IMAGE"
    ],
    [
      297,
      166,
      0,
      167,
      0,
      "WANVAE"
    ],
    [
      298,
      172,
      0,
      167,
      1,
      "LATENT"
    ],
    [
      299,
      143,
      0,
      168,
      0,
      "WANTEXTENCODER"
    ],
    [
      300,
      151,
      0,
      168,
      1,
      "WANVIDEOMODEL"
    ],
    [
      302,
      152,
      0,
      172,
      0,
      "WANVIDEOMODEL"
    ],
    [
      303,
      168,
      0,
      172,
      1,
      "WANVIDEOTEXTEMBEDS"
    ],
    [
      304,
      148,
      0,
      172,
      2,
      "WANVIDIMAGE_EMBEDS"
    ],
    [
      306,
      150,
      0,
      172,
      10,
      "EXPERIMENTALARGS"
    ],
    [
      308,
      175,
      0,
      174,
      0,
      "DAMODEL"
    ],
    [
      319,
      153,
      0,
      156,
      0,
      "IMAGE"
    ],
    [
      322,
      145,
      0,
      148,
      1,
      "IMAGE"
    ],
    [
      329,
      179,
      0,
      148,
      2,
      "IMAGE"
    ],
    [
      334,
      147,
      0,
      172,
      6,
      "TEACACHEARGS"
    ],
    [
      356,
      180,
      0,
      197,
      2,
      "IMAGE"
    ],
    [
      359,
      197,
      1,
      148,
      3,
      "MASK"
    ],
    [
      361,
      197,
      0,
      145,
      0,
      "IMAGE"
    ],
    [
      365,
      203,
      0,
      122,
      0,
      "WANVAE"
    ],
    [
      366,
      202,
      0,
      125,
      0,
      "WANTEXTENCODER"
    ],
    [
      367,
      211,
      0,
      121,
      0,
      "WANVIDEOMODEL"
    ],
    [
      368,
      253,
      0,
      213,
      0,
      "*"
    ],
    [
      369,
      224,
      0,
      214,
      0,
      "STRING"
    ],
    [
      370,
      243,
      0,
      214,
      1,
      "STRING"
    ],
    [
      371,
      214,
      0,
      215,
      0,
      "*"
    ],
    [
      372,
      233,
      0,
      216,
      0,
      "STRING"
    ],
    [
      373,
      232,
      0,
      216,
      1,
      "STRING"
    ],
    [
      378,
      255,
      0,
      237,
      0,
      "*"
    ],
    [
      380,
      250,
      0,
      239,
      0,
      "*"
    ],
    [
      382,
      242,
      0,
      241,
      0,
      "*"
    ],
    [
      383,
      173,
      1,
      260,
      0,
      "*"
    ],
    [
      387,
      262,
      0,
      197,
      3,
      "INT"
    ],
    [
      389,
      173,
      0,
      235,
      0,
      "IMAGE"
    ],
    [
      391,
      242,
      0,
      173,
      2,
      "INT"
    ],
    [
      392,
      265,
      0,
      173,
      3,
      "INT"
    ],
    [
      393,
      266,
      0,
      174,
      1,
      "IMAGE"
    ],
    [
      394,
      263,
      0,
      266,
      0,
      "IMAGE"
    ],
    [
      395,
      267,
      0,
      266,
      1,
      "INT"
    ],
    [
      396,
      267,
      0,
      266,
      2,
      "INT"
    ],
    [
      399,
      268,
      0,
      197,
      0,
      "IMAGE"
    ],
    [
      413,
      266,
      1,
      269,
      1,
      "INT"
    ],
    [
      414,
      266,
      2,
      269,
      2,
      "INT"
    ],
    [
      415,
      269,
      0,
      179,
      0,
      "IMAGE"
    ],
    [
      417,
      271,
      0,
      211,
      4,
      "VACEPATH"
    ],
    [
      421,
      167,
      0,
      273,
      0,
      "*"
    ],
    [
      422,
      158,
      0,
      274,
      0,
      "*"
    ],
    [
      423,
      216,
      0,
      200,
      4,
      "STRING"
    ],
    [
      424,
      234,
      0,
      200,
      0,
      "IMAGE"
    ],
    [
      425,
      275,
      0,
      278,
      0,
      "STRING"
    ],
    [
      426,
      276,
      0,
      278,
      1,
      "STRING"
    ],
    [
      427,
      277,
      0,
      165,
      0,
      "IMAGE"
    ],
    [
      428,
      278,
      0,
      165,
      4,
      "STRING"
    ],
    [
      430,
      174,
      0,
      279,
      1,
      "IMAGE"
    ],
    [
      431,
      279,
      0,
      180,
      0,
      "IMAGE"
    ],
    [
      434,
      173,
      3,
      285,
      0,
      "VHS_VIDEOINFO"
    ],
    [
      435,
      285,
      5,
      165,
      5,
      "FLOAT,INT"
    ],
    [
      436,
      285,
      5,
      200,
      5,
      "FLOAT,INT"
    ],
    [
      437,
      209,
      0,
      211,
      0,
      "WANCOMPILEARGS"
    ],
    [
      438,
      212,
      0,
      211,
      1,
      "BLOCKSWAPARGS"
    ],
    [
      442,
      266,
      0,
      290,
      0,
      "IMAGE"
    ],
    [
      444,
      267,
      0,
      290,
      1,
      "INT"
    ],
    [
      445,
      290,
      0,
      279,
      0,
      "IMAGE"
    ],
    [
      446,
      294,
      0,
      293,
      1,
      "FL2MODEL"
    ],
    [
      450,
      261,
      0,
      293,
      0,
      "IMAGE"
    ],
    [
      453,
      299,
      0,
      172,
      4,
      "FETAARGS"
    ],
    [
      454,
      300,
      0,
      172,
      8,
      "SLGARGS"
    ],
    [
      455,
      302,
      0,
      172,
      12,
      "INT"
    ],
    [
      477,
      317,
      0,
      316,
      0,
      "*"
    ],
    [
      478,
      293,
      2,
      318,
      0,
      "*"
    ],
    [
      479,
      319,
      0,
      318,
      1,
      "STRING"
    ],
    [
      480,
      318,
      0,
      168,
      2,
      "STRING"
    ],
    [
      481,
      261,
      0,
      269,
      0,
      "IMAGE"
    ],
    [
      482,
      261,
      0,
      268,
      0,
      "IMAGE"
    ],
    [
      495,
      267,
      0,
      268,
      1,
      "INT"
    ],
    [
      496,
      267,
      0,
      268,
      2,
      "INT"
    ],
    [
      497,
      328,
      0,
      326,
      0,
      "IMAGE"
    ],
    [
      498,
      326,
      0,
      327,
      0,
      "IMAGE"
    ]
  ],
  "id": "cde2f6b4-5512-4ce3-b1f9-46bb2ba66f02",
  "config": {},
  "version": 0.4,
  "last_node_id": 328,
  "revision": 0
}