{
  "id": "ec7da562-7e21-4dac-a0d2-f4441e1efd3b",
  "revision": 0,
  "last_node_id": 74,
  "last_link_id": 157,
  "nodes": [
    {
      "id": 58,
      "type": "KSamplerAdvanced",
      "pos": [
        1262.509765625,
        -26.73247528076172
      ],
      "size": [
        304.748046875,
        546
      ],
      "flags": {},
      "order": 11,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 123
        },
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 128
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": 130
        },
        {
          "name": "latent_image",
          "type": "LATENT",
          "link": 113
        }
      ],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [
            124
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.64",
        "Node name for S&R": "KSamplerAdvanced"
      },
      "widgets_values": [
        "disable",
        0,
        "fixed",
        20,
        3.5,
        "euler",
        "simple",
        10,
        10000,
        "disable"
      ]
    },
    {
      "id": 8,
      "type": "VAEDecode",
      "pos": [
        1590,
        -20
      ],
      "size": [
        210,
        46
      ],
      "flags": {},
      "order": 12,
      "mode": 0,
      "inputs": [
        {
          "name": "samples",
          "type": "LATENT",
          "link": 124
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": 144
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "slot_index": 0,
          "links": [
            56,
            93
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.64",
        "Node name for S&R": "VAEDecode"
      },
      "widgets_values": []
    },
    {
      "id": 7,
      "type": "CLIPTextEncode",
      "pos": [
        413,
        389
      ],
      "size": [
        425.27801513671875,
        180.6060791015625
      ],
      "flags": {},
      "order": 7,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 146
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "slot_index": 0,
          "links": [
            129,
            130
          ]
        }
      ],
      "title": "CLIP Text Encode (Negative Prompt)",
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.64",
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": [
        "è‰²è°ƒè‰³ä¸½ï¼Œè¿‡æ›ï¼Œé™æ€ï¼Œç»†èŠ‚æ¨¡ç³Šä¸æ¸…ï¼Œå­—å¹•ï¼Œé£æ ¼ï¼Œä½œå“ï¼Œç”»ä½œï¼Œç”»é¢ï¼Œé™æ­¢ï¼Œæ•´ä½“å‘ç°ï¼Œæœ€å·®è´¨é‡ï¼Œä½è´¨é‡ï¼ŒJPEGå‹ç¼©æ®‹ç•™ï¼Œä¸‘é™‹çš„ï¼Œæ®‹ç¼ºçš„ï¼Œå¤šä½™çš„æ‰‹æŒ‡ï¼Œç”»å¾—ä¸å¥½çš„æ‰‹éƒ¨ï¼Œç”»å¾—ä¸å¥½çš„è„¸éƒ¨ï¼Œç•¸å½¢çš„ï¼Œæ¯å®¹çš„ï¼Œå½¢æ€ç•¸å½¢çš„è‚¢ä½“ï¼Œæ‰‹æŒ‡èåˆï¼Œé™æ­¢ä¸åŠ¨çš„ç”»é¢ï¼Œæ‚ä¹±çš„èƒŒæ™¯ï¼Œä¸‰æ¡è…¿ï¼ŒèƒŒæ™¯äººå¾ˆå¤šï¼Œå€’ç€èµ°"
      ],
      "color": "#322",
      "bgcolor": "#533"
    },
    {
      "id": 61,
      "type": "EmptyHunyuanLatentVideo",
      "pos": [
        560,
        620
      ],
      "size": [
        270.0943298339844,
        130
      ],
      "flags": {},
      "order": 0,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [
            131
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.64",
        "Node name for S&R": "EmptyHunyuanLatentVideo"
      },
      "widgets_values": [
        1280,
        704,
        57,
        1
      ]
    },
    {
      "id": 57,
      "type": "KSamplerAdvanced",
      "pos": [
        893.0060424804688,
        -29.923471450805664
      ],
      "size": [
        304.748046875,
        546
      ],
      "flags": {},
      "order": 10,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 125
        },
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 127
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": 129
        },
        {
          "name": "latent_image",
          "type": "LATENT",
          "link": 131
        }
      ],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [
            113
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.64",
        "Node name for S&R": "KSamplerAdvanced"
      },
      "widgets_values": [
        "enable",
        868525555974331,
        "fixed",
        20,
        3.5,
        "euler",
        "simple",
        0,
        10,
        "enable"
      ]
    },
    {
      "id": 55,
      "type": "ModelSamplingSD3",
      "pos": [
        479.226318359375,
        87.29454040527344
      ],
      "size": [
        315,
        58
      ],
      "flags": {},
      "order": 9,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 157
        }
      ],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "slot_index": 0,
          "links": [
            123
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.64",
        "Node name for S&R": "ModelSamplingSD3"
      },
      "widgets_values": [
        8
      ]
    },
    {
      "id": 67,
      "type": "VAELoaderMultiGPU",
      "pos": [
        28.914316177368164,
        445.9161071777344
      ],
      "size": [
        369.09429931640625,
        82
      ],
      "flags": {},
      "order": 1,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "VAE",
          "type": "VAE",
          "links": [
            144
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfyui-multigpu",
        "ver": "0d6dfc7524472943ba912a6ec3088757edba15c3",
        "Node name for S&R": "VAELoaderMultiGPU"
      },
      "widgets_values": [
        "wan_2.1_vae.safetensors",
        "cuda:1"
      ],
      "color": "#008181",
      "bgcolor": "rgba(24,24,27,.9)"
    },
    {
      "id": 68,
      "type": "CLIPLoaderMultiGPU",
      "pos": [
        13.91906452178955,
        234.1349334716797
      ],
      "size": [
        383.4211730957031,
        110.7756118774414
      ],
      "flags": {},
      "order": 2,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "CLIP",
          "type": "CLIP",
          "links": [
            145,
            146
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfyui-multigpu",
        "ver": "0d6dfc7524472943ba912a6ec3088757edba15c3",
        "Node name for S&R": "CLIPLoaderMultiGPU"
      },
      "widgets_values": [
        "umt5_xxl_fp8_e4m3fn_scaled.safetensors",
        "wan",
        "cuda:1"
      ],
      "color": "#008181",
      "bgcolor": "rgba(24,24,27,.9)"
    },
    {
      "id": 6,
      "type": "CLIPTextEncode",
      "pos": [
        415,
        186
      ],
      "size": [
        422.84503173828125,
        164.31304931640625
      ],
      "flags": {},
      "order": 6,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 145
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "slot_index": 0,
          "links": [
            127,
            128
          ]
        }
      ],
      "title": "CLIP Text Encode (Positive Prompt)",
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.64",
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": [
        "A towering technological monolith in a cyberpunk cityscape at night, with \"Wan 2.2 DisTorch 2\" emblazoned across its surface in massive neon blue-green mixed with purple letters that illuminate the surrounding buildings. The text occupies the center of the frame, crafted from glowing plasma tubes and crackling energy. Rain-slicked streets below reflect the brilliant signage, while holographic advertisements and flying vehicles populate the background. Moody atmospheric lighting, heavy contrast, photorealistic textures, cinematic color grading. "
      ],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 47,
      "type": "SaveWEBM",
      "pos": [
        2530,
        -20
      ],
      "size": [
        763.67041015625,
        885.67041015625
      ],
      "flags": {},
      "order": 14,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 93
        }
      ],
      "outputs": [],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.64",
        "Node name for S&R": "SaveWEBM"
      },
      "widgets_values": [
        "MultiGPU",
        "vp9",
        16.000000000000004,
        13.3333740234375
      ]
    },
    {
      "id": 28,
      "type": "SaveAnimatedWEBP",
      "pos": [
        1820,
        -20
      ],
      "size": [
        674.6224975585938,
        820.6224975585938
      ],
      "flags": {},
      "order": 13,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 56
        }
      ],
      "outputs": [],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.64",
        "Node name for S&R": "SaveAnimatedWEBP"
      },
      "widgets_values": [
        "MultiGPU",
        16,
        false,
        80,
        "default"
      ]
    },
    {
      "id": 62,
      "type": "UNETLoaderDisTorch2MultiGPU",
      "pos": [
        47.84718322753906,
        -311.30853271484375
      ],
      "size": [
        351.41351318359375,
        202
      ],
      "flags": {},
      "order": 3,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [
            156
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfyui-multigpu",
        "ver": "0d6dfc7524472943ba912a6ec3088757edba15c3",
        "Node name for S&R": "UNETLoaderDisTorch2MultiGPU"
      },
      "widgets_values": [
        "wan2.2_t2v_high_noise_14B_fp8_scaled.safetensors",
        "default",
        "cuda:0",
        9,
        "cuda:1",
        "",
        true
      ],
      "color": "#008181",
      "bgcolor": "rgba(24,24,27,.9)"
    },
    {
      "id": 70,
      "type": "UNETLoaderDisTorch2MultiGPU",
      "pos": [
        33.50856018066406,
        -66.39156341552734
      ],
      "size": [
        351.41351318359375,
        202
      ],
      "flags": {},
      "order": 4,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [
            157
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfyui-multigpu",
        "ver": "0d6dfc7524472943ba912a6ec3088757edba15c3",
        "Node name for S&R": "UNETLoaderDisTorch2MultiGPU"
      },
      "widgets_values": [
        "wan2.2_t2v_low_noise_14B_fp8_scaled.safetensors",
        "default",
        "cuda:0",
        9,
        "cuda:1",
        "",
        true
      ],
      "color": "#008181",
      "bgcolor": "rgba(24,24,27,.9)"
    },
    {
      "id": 54,
      "type": "ModelSamplingSD3",
      "pos": [
        503.1690979003906,
        -198.79998779296875
      ],
      "size": [
        315,
        58
      ],
      "flags": {},
      "order": 8,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 156
        }
      ],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "slot_index": 0,
          "links": [
            125
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.64",
        "Node name for S&R": "ModelSamplingSD3"
      },
      "widgets_values": [
        8.000000000000002
      ]
    },
    {
      "id": 74,
      "type": "MarkdownNote",
      "pos": [
        -658.3707275390625,
        -320.4559326171875
      ],
      "size": [
        634.0631103515625,
        720.5999755859375
      ],
      "flags": {},
      "order": 5,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "title": "ComfyUI-MultiGPU Note - wan2_2 Double UNet DisTorch2",
      "properties": {},
      "widgets_values": [
        "A DisTorch2 Wan 2.2 workflow where we ignore CPU offloading completely and load both UNets placing blocks on the CPU and CLIP DisTorch2. In this case we are using the DisTorch2 node to statically allocate approximately 70% of the UNet model (13.3G) to the cpu. With `eject_models` being `True`, all other models on the `compute` card (`cuda:0`) will be unloaded, regardless of size, ensuring a clean compute card prior to inference.\n\n## Custom Node\n- [ComfyUI-MultiGPU](https://github.com/pollockjj/ComfyUI-MultiGPU)\n```\nğŸ“‚ ComfyUI/\nâ”œâ”€â”€ ğŸ“‚ custom_nodes/\nâ”‚   â”œâ”€â”€ ğŸ“‚ ComfyUI-MultiGPU/\n```\n## Model links\n\n**Diffusion model**\n- [wan2.2_t2v_high_noise_14B_fp8_scaled.safetensors](https://huggingface.co/Comfy-Org/Wan_2.2_ComfyUI_Repackaged/blob/main/split_files/diffusion_models/wan2.2_t2v_high_noise_14B_fp8_scaled.safetensors)\n- [wan2.2_t2v_low_noise_14B_fp8_scaled.safetensors](https://huggingface.co/Comfy-Org/Wan_2.2_ComfyUI_Repackaged/blob/main/split_files/diffusion_models/wan2.2_t2v_low_noise_14B_fp8_scaled.safetensors)\n\n**CLIP**\n- [umt5_xxl_fp8_e4m3fn_scaled.safetensors](https://huggingface.co/Comfy-Org/Wan_2.2_ComfyUI_Repackaged/resolve/main/split_files/text_encoders/umt5_xxl_fp8_e4m3fn_scaled.safetensors)\n\n**VAE**\n- [wan_2.1_vae.safetensors](https://huggingface.co/Comfy-Org/Wan_2.2_ComfyUI_Repackaged/blob/main/split_files/vae/wan_2.1_vae.safetensors)\n\nModel Storage Location\n\n```\nğŸ“‚ ComfyUI/\nâ”œâ”€â”€ ğŸ“‚ models/\nâ”‚   â”œâ”€â”€ ğŸ“‚ clip/\nâ”‚   â”‚   â””â”€â”€ umt5_xxl_fp8_e4m3fn_scaled.safetensors\nâ”‚   â”œâ”€â”€ ğŸ“‚ unet/\nâ”‚   â”‚   â”œâ”€â”€ wan2.2_t2v_high_noise_14B_fp8_scaled.safetensors [ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªğŸŸª]\nâ”‚   â”‚   â”œâ”€â”€ wan2.2_t2v_low_noise_14B_fp8_scaled.safetensors [ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªğŸŸª]\nâ”‚   â”œâ”€â”€ ğŸ“‚ vae/\nâ”‚   â”‚   â””â”€â”€ qwen_image_vae.safetensors \n```\n## Device Mapping (Example: Two GPUs, 1 CPU)\n```\nğŸ–¥ï¸ system \nâ”œâ”€â”€ ğŸŸ¢ cuda:0\nâ”‚       â””â”€â”€ wan2.2_t2v_high_noise_14B_fp8_scaled.safetensors [ğŸŸ©ğŸŸ©ğŸŸ©]\nâ”‚       â””â”€â”€ wan2.2_t2v_low_noise_14B_fp8_scaled.safetensors [ğŸŸ©ğŸŸ©ğŸŸ©]\nâ”œâ”€â”€ ğŸŸ£ cuda:1\nâ”‚       â””â”€â”€ wan2.2_t2v_high_noise_14B_fp8_scaled.safetensors [ğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªğŸŸª]\nâ”‚       â””â”€â”€ wan2.2_t2v_high_noise_14B_fp8_scaled.safetensors [ğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªğŸŸªğŸŸª]\nâ”‚       â””â”€â”€ umt5_xxl_fp8_e4m3fn_scaled.safetensors\nâ”‚       â””â”€â”€ wan_2.1_vae.safetensors\nâ”œâ”€â”€ âš™ï¸ cpu\n```"
      ],
      "color": "#008181",
      "bgcolor": "rgba(24,24,27,.9)"
    }
  ],
  "links": [
    [
      56,
      8,
      0,
      28,
      0,
      "IMAGE"
    ],
    [
      93,
      8,
      0,
      47,
      0,
      "IMAGE"
    ],
    [
      113,
      57,
      0,
      58,
      3,
      "LATENT"
    ],
    [
      123,
      55,
      0,
      58,
      0,
      "MODEL"
    ],
    [
      124,
      58,
      0,
      8,
      0,
      "LATENT"
    ],
    [
      125,
      54,
      0,
      57,
      0,
      "MODEL"
    ],
    [
      127,
      6,
      0,
      57,
      1,
      "CONDITIONING"
    ],
    [
      128,
      6,
      0,
      58,
      1,
      "CONDITIONING"
    ],
    [
      129,
      7,
      0,
      57,
      2,
      "CONDITIONING"
    ],
    [
      130,
      7,
      0,
      58,
      2,
      "CONDITIONING"
    ],
    [
      131,
      61,
      0,
      57,
      3,
      "LATENT"
    ],
    [
      144,
      67,
      0,
      8,
      1,
      "VAE"
    ],
    [
      145,
      68,
      0,
      6,
      0,
      "CLIP"
    ],
    [
      146,
      68,
      0,
      7,
      0,
      "CLIP"
    ],
    [
      156,
      62,
      0,
      54,
      0,
      "MODEL"
    ],
    [
      157,
      70,
      0,
      55,
      0,
      "MODEL"
    ]
  ],
  "groups": [],
  "config": {},
  "extra": {
    "ds": {
      "scale": 0.7627768444385852,
      "offset": [
        923.7572852838339,
        611.8769299301177
      ]
    },
    "frontendVersion": "1.27.10",
    "VHS_latentpreview": false,
    "VHS_latentpreviewrate": 0,
    "VHS_MetadataImage": true,
    "VHS_KeepIntermediate": true
  },
  "version": 0.4
}