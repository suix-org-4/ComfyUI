{"last_node_id":51,"last_link_id":57,"nodes":[{"id":13,"type":"extra_parameters","pos":{"0":-635.2780151367188,"1":517.6666870117188},"size":{"0":315,"1":346},"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[{"name":"extra_parameters","type":"DICT","links":[12],"shape":3,"label":"extra_parameters"}],"properties":{"Node name for S&R":"extra_parameters"},"widgets_values":[false,1,"",0,0,1,0,false,false,1,"",1,50]},{"id":14,"type":"load_persona","pos":{"0":-680.2780151367188,"1":950.6669311523438},"size":{"0":315,"1":106},"flags":{},"order":1,"mode":0,"inputs":[{"name":"file_content","type":"STRING","link":null,"widget":{"name":"file_content"},"label":"file_content"}],"outputs":[{"name":"system_prompt","type":"STRING","links":[13],"slot_index":0,"shape":3,"label":"system_prompt"}],"properties":{"Node name for S&R":"load_persona"},"widgets_values":["图片提示词生成器jsonout版",true,""]},{"id":16,"type":"json_get_value","pos":{"0":995.7233276367188,"1":395.6666564941406},"size":{"0":315,"1":106},"flags":{},"order":24,"mode":0,"inputs":[{"name":"text","type":"STRING","link":16,"widget":{"name":"text"},"label":"text"}],"outputs":[{"name":"any","type":"*","links":[17],"slot_index":0,"shape":3,"label":"any"}],"properties":{"Node name for S&R":"json_get_value"},"widgets_values":["","positive",true]},{"id":18,"type":"clear_model","pos":{"0":514.7219848632812,"1":784.667236328125},"size":{"0":315,"1":122},"flags":{},"order":21,"mode":0,"inputs":[{"name":"any","type":"*","link":18,"label":"any"},{"name":"model","type":"CUSTOM","link":19,"label":"model"},{"name":"tokenizer","type":"CUSTOM","link":20,"label":"tokenizer"}],"outputs":[{"name":"any","type":"*","links":[14],"slot_index":0,"shape":3,"label":"any"}],"properties":{"Node name for S&R":"clear_model"},"widgets_values":[true,false]},{"id":12,"type":"ShowText|pysssss","pos":{"0":527.3328247070312,"1":410.6666564941406},"size":{"0":367.1725769042969,"1":302.8040771484375},"flags":{},"order":23,"mode":0,"inputs":[{"name":"text","type":"STRING","link":14,"widget":{"name":"text"},"label":"文本"}],"outputs":[{"name":"STRING","type":"STRING","links":[16],"slot_index":0,"shape":6,"label":"字符串"}],"properties":{"Node name for S&R":"ShowText|pysssss"},"widgets_values":["","{\n\"positive\": \"young attractive seductive demon,beautiful detailed eyes,beautiful detailed lips,extremely detailed eyes and face,long eyelashes,demon horns,demon tail,red skin,red hair,red dress,leather outfit,red nails,smiling,confident pose,photographic style,best quality,4k,highres,masterpiece:1.2,ultra-detailed,realistic,photorealistic,photo-realistic:1.37,HDR,UHD,studio lighting,ultra-fine painting,sharp focus,physically-based rendering,extreme detail description,professional,vivid colors,bokeh,high contrast,shadow details,lighting from below,deep shadows,highly detailed background,devilish features,red eyes,angelic wings,red lips,smoky makeup,haunting expression\",\n\"negative\": \"nsfw,(low quality,normal quality,worst quality,jpeg artifacts),cropped,monochrome,lowres,low saturation,((watermark)),(white letters),skin spots,acnes,skin blemishes,age spot,mutated hands,mutated fingers,deformed,bad anatomy,disfigured,poorly drawn face,extra limb,ugly,poorly drawn hands,missing limb,floating limbs,disconnected limbs,out of focus,long neck,long body,extra fingers,fewer fingers,,(multi nipples),bad hands,signature,username,bad feet,blurry,bad body\"\n}"]},{"id":22,"type":"VAELoader","pos":{"0":-606.9658203125,"1":2004.6976318359375},"size":{"0":311.81634521484375,"1":60.429901123046875},"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[{"name":"VAE","type":"VAE","links":[23],"slot_index":0,"shape":3,"label":"VAE"}],"properties":{"Node name for S&R":"VAELoader"},"widgets_values":["FLUX1/ae.safetensors"]},{"id":25,"type":"SamplerCustomAdvanced","pos":{"0":209.0343780517578,"1":1764.69775390625},"size":{"0":272.3617858886719,"1":124.53733825683594},"flags":{},"order":30,"mode":0,"inputs":[{"name":"noise","type":"NOISE","link":25,"slot_index":0,"label":"噪波生成"},{"name":"guider","type":"GUIDER","link":26,"slot_index":1,"label":"引导"},{"name":"sampler","type":"SAMPLER","link":27,"slot_index":2,"label":"采样器"},{"name":"sigmas","type":"SIGMAS","link":28,"slot_index":3,"label":"Sigmas"},{"name":"latent_image","type":"LATENT","link":29,"slot_index":4,"label":"Latent"}],"outputs":[{"name":"output","type":"LATENT","links":[22],"slot_index":0,"shape":3,"label":"输出"},{"name":"denoised_output","type":"LATENT","links":null,"shape":3,"label":"降噪输出"}],"properties":{"Node name for S&R":"SamplerCustomAdvanced"},"widgets_values":[]},{"id":26,"type":"KSamplerSelect","pos":{"0":-174.9656219482422,"1":2484.69873046875},"size":{"0":315,"1":58},"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[{"name":"SAMPLER","type":"SAMPLER","links":[27],"shape":3,"label":"采样器"}],"properties":{"Node name for S&R":"KSamplerSelect"},"widgets_values":["dpm_2"]},{"id":27,"type":"BasicScheduler","pos":{"0":-174.9656219482422,"1":2580.69970703125},"size":{"0":315,"1":106},"flags":{},"order":22,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":30,"slot_index":0,"label":"模型"}],"outputs":[{"name":"SIGMAS","type":"SIGMAS","links":[28],"shape":3,"label":"Sigmas"}],"properties":{"Node name for S&R":"BasicScheduler"},"widgets_values":["simple",32,1]},{"id":28,"type":"BasicGuider","pos":{"0":-78.96562957763672,"1":1620.69775390625},"size":{"0":222.3482666015625,"1":46},"flags":{},"order":29,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":31,"slot_index":0,"label":"模型"},{"name":"conditioning","type":"CONDITIONING","link":32,"slot_index":1,"label":"条件"}],"outputs":[{"name":"GUIDER","type":"GUIDER","links":[26],"slot_index":0,"shape":3,"label":"引导"}],"properties":{"Node name for S&R":"BasicGuider"},"widgets_values":[]},{"id":29,"type":"RandomNoise","pos":{"0":-174.9656219482422,"1":2340.6982421875},"size":{"0":315,"1":82},"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[{"name":"NOISE","type":"NOISE","links":[25],"shape":3,"label":"噪波生成"}],"properties":{"Node name for S&R":"RandomNoise"},"widgets_values":[128579811562936,"randomize"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":30,"type":"FluxGuidance","pos":{"0":-174.9656219482422,"1":1716.69775390625},"size":{"0":317.4000244140625,"1":58},"flags":{},"order":28,"mode":0,"inputs":[{"name":"conditioning","type":"CONDITIONING","link":33,"label":"条件"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[32],"slot_index":0,"shape":3,"label":"条件"}],"properties":{"Node name for S&R":"FluxGuidance"},"widgets_values":[3],"color":"#233","bgcolor":"#355"},{"id":31,"type":"EmptySD3LatentImage","pos":{"0":-174.9656219482422,"1":2196.6982421875},"size":{"0":315,"1":106},"flags":{},"order":19,"mode":0,"inputs":[{"name":"width","type":"INT","link":54,"widget":{"name":"width"},"label":"宽度"},{"name":"height","type":"INT","link":56,"widget":{"name":"height"},"label":"高度"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[29],"slot_index":0,"shape":3,"label":"Latent"}],"properties":{"Node name for S&R":"EmptySD3LatentImage"},"widgets_values":[896,1280,1]},{"id":33,"type":"ModelSamplingFlux","pos":{"0":-174.9656219482422,"1":2724.69970703125},"size":{"0":315,"1":130},"flags":{},"order":20,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":36,"slot_index":0,"label":"模型"},{"name":"width","type":"INT","link":55,"slot_index":1,"widget":{"name":"width"},"label":"宽度"},{"name":"height","type":"INT","link":57,"slot_index":2,"widget":{"name":"height"},"label":"高度"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[30,31],"slot_index":0,"shape":3,"label":"模型"}],"properties":{"Node name for S&R":"ModelSamplingFlux"},"widgets_values":[1.15,0.5,896,1280]},{"id":36,"type":"Note","pos":{"0":-174.9656219482422,"1":2916.69970703125},"size":{"0":314.99755859375,"1":117.98363494873047},"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[],"properties":{"text":""},"widgets_values":["The reference sampling implementation auto adjusts the shift value based on the resolution, if you don't want this you can just bypass (CTRL-B) this ModelSamplingFlux node.\n"],"color":"#432","bgcolor":"#653"},{"id":17,"type":"ShowText|pysssss","pos":{"0":1403.144287109375,"1":409.2113342285156},"size":{"0":317.5274353027344,"1":243.24688720703125},"flags":{},"order":25,"mode":0,"inputs":[{"name":"text","type":"STRING","link":17,"widget":{"name":"text"},"label":"文本"}],"outputs":[{"name":"STRING","type":"STRING","links":[47],"slot_index":0,"shape":6,"label":"字符串"}],"properties":{"Node name for S&R":"ShowText|pysssss"},"widgets_values":["","young attractive seductive demon,beautiful detailed eyes,beautiful detailed lips,extremely detailed eyes and face,long eyelashes,demon horns,demon tail,red skin,red hair,red dress,leather outfit,red nails,smiling,confident pose,photographic style,best quality,4k,highres,masterpiece:1.2,ultra-detailed,realistic,photorealistic,photo-realistic:1.37,HDR,UHD,studio lighting,ultra-fine painting,sharp focus,physically-based rendering,extreme detail description,professional,vivid colors,bokeh,high contrast,shadow details,lighting from below,deep shadows,highly detailed background,devilish features,red eyes,angelic wings,red lips,smoky makeup,haunting expression"]},{"id":23,"type":"DualCLIPLoader","pos":{"0":-606.9658203125,"1":1860.6976318359375},"size":{"0":315,"1":106},"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[{"name":"CLIP","type":"CLIP","links":[21],"slot_index":0,"shape":3,"label":"CLIP"}],"properties":{"Node name for S&R":"DualCLIPLoader"},"widgets_values":["t5/google_t5-v1_1-xxl_encoderonly-fp8_e4m3fn.safetensors","clip_l.safetensors","flux"]},{"id":11,"type":"LLM_local","pos":{"0":-155.2781219482422,"1":412.6666564941406},"size":{"0":538.8195190429688,"1":522.49072265625},"flags":{},"order":16,"mode":0,"inputs":[{"name":"model","type":"CUSTOM","link":10,"label":"model"},{"name":"tokenizer","type":"CUSTOM","link":11,"label":"tokenizer"},{"name":"image","type":"IMAGE","link":null,"label":"image"},{"name":"extra_parameters","type":"DICT","link":12,"label":"extra_parameters"},{"name":"system_prompt_input","type":"STRING","link":13,"widget":{"name":"system_prompt_input"},"label":"system_prompt_input"},{"name":"user_prompt_input","type":"STRING","link":45,"widget":{"name":"user_prompt_input"},"label":"user_prompt_input"},{"name":"tools","type":"STRING","link":null,"widget":{"name":"tools"},"label":"tools"},{"name":"file_content","type":"STRING","link":null,"widget":{"name":"file_content"},"label":"file_content"}],"outputs":[{"name":"assistant_response","type":"STRING","links":[18],"slot_index":0,"shape":3,"label":"assistant_response"},{"name":"history","type":"STRING","links":null,"slot_index":1,"shape":3,"label":"history"},{"name":"tool","type":"STRING","links":null,"shape":3,"label":"tool"},{"name":"image","type":"IMAGE","links":null,"shape":3,"label":"image"}],"properties":{"Node name for S&R":"LLM_local"},"widgets_values":["","","LLM",1,512,"disable","disable","enable","","","","",100,"",true]},{"id":19,"type":"CLIPTextEncode","pos":{"0":-219.9656219482422,"1":1874.6976318359375},"size":{"0":422.84503173828125,"1":164.31304931640625},"flags":{},"order":27,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":21,"label":"CLIP"},{"name":"text","type":"STRING","link":48,"widget":{"name":"text"},"label":"文本"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[33],"slot_index":0,"label":"条件"}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["detailed reaper,handsome reaper,dark reaper,holding scythe,scythe with detailed design,bright red blood,gloomy atmosphere,cloudy sky,desolate landscape,ancient ruins,ragged clothes,hooded figure,leather boots,dark aura,shadowy figure,ultra-detailed,realistic,photorealistic,photo-realistic:1.37,best quality,4k,8k,highres,masterpiece:1.2,ultra-fine painting,sharp focus,physically-based rendering,extreme detail description,professional,vivid colors,bokeh, HDR, studio lighting, dramatic lighting, dark background, cold lighting, misty atmosphere, ancient stones, fallen leaves, rustling leaves, autumn scene, ghostly light, supernatural presence"],"color":"#232","bgcolor":"#353"},{"id":32,"type":"Note","pos":{"0":-606.9658203125,"1":2148.6982421875},"size":{"0":336,"1":288},"flags":{},"order":7,"mode":0,"inputs":[],"outputs":[],"properties":{"text":""},"widgets_values":["If you get an error in any of the nodes above make sure the files are in the correct directories.\n\nSee the top of the examples page for the links : https://comfyanonymous.github.io/ComfyUI_examples/flux/\n\nflux1-dev.safetensors goes in: ComfyUI/models/unet/\n\nt5xxl_fp16.safetensors and clip_l.safetensors go in: ComfyUI/models/clip/\n\nae.safetensors goes in: ComfyUI/models/vae/\n\n\nTip: You can set the weight_dtype above to one of the fp8 types if you have memory issues."],"color":"#432","bgcolor":"#653"},{"id":24,"type":"UNETLoader","pos":{"0":-606.9658203125,"1":1716.69775390625},"size":{"0":315,"1":82},"flags":{},"order":8,"mode":0,"inputs":[],"outputs":[{"name":"MODEL","type":"MODEL","links":[36],"slot_index":0,"shape":3,"label":"模型"}],"properties":{"Node name for S&R":"UNETLoader"},"widgets_values":["FLUX.1/flux1-dev-fp8-Kijia.safetensors","default"],"color":"#223","bgcolor":"#335"},{"id":10,"type":"LLM_local_loader","pos":{"0":-673.2780151367188,"1":275.6663818359375},"size":{"0":373.5710754394531,"1":161.69667053222656},"flags":{},"order":9,"mode":0,"inputs":[],"outputs":[{"name":"model","type":"CUSTOM","links":[10,19],"slot_index":0,"shape":3,"label":"model"},{"name":"tokenizer","type":"CUSTOM","links":[11,20],"slot_index":1,"shape":3,"label":"tokenizer"}],"properties":{"Node name for S&R":"LLM_local_loader"},"widgets_values":["/home/machines/data/ComfyUI/models/LLM/Qwen2.5-7B-Instruct","auto","float16",false]},{"id":20,"type":"VAEDecode","pos":{"0":244,"1":1940},"size":{"0":210,"1":46},"flags":{},"order":31,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":22,"label":"Latent"},{"name":"vae","type":"VAE","link":23,"label":"VAE"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[50],"slot_index":0,"label":"图像"}],"properties":{"Node name for S&R":"VAEDecode"},"widgets_values":[]},{"id":43,"type":"easy cleanGpuUsed","pos":{"0":242,"1":2079},"size":{"0":210,"1":26},"flags":{},"order":32,"mode":0,"inputs":[{"name":"anything","type":"*","link":50,"label":"输入任何"}],"outputs":[{"name":"output","type":"*","links":[51],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"easy cleanGpuUsed"}},{"id":21,"type":"SaveImage","pos":{"0":573,"1":1771},"size":{"0":985.3012084960938,"1":1060.3828125},"flags":{},"order":33,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":51,"label":"图像"}],"outputs":[],"properties":{"Node name for S&R":"SaveImage"},"widgets_values":["ComfyUI"]},{"id":50,"type":"GetNode","pos":{"0":-572,"1":2568},"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":14,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","links":[54,55],"slot_index":0}],"title":"Get_图像宽度","properties":{},"widgets_values":["图像宽度"]},{"id":51,"type":"GetNode","pos":{"0":-561,"1":2698},"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":15,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","links":[56,57],"slot_index":0}],"title":"Get_图像高度","properties":{},"widgets_values":["图像高度"]},{"id":37,"type":"Text Multiline","pos":{"0":-1836,"1":750},"size":{"0":400,"1":200},"flags":{},"order":10,"mode":0,"inputs":[],"outputs":[{"name":"STRING","type":"STRING","links":[45,46],"slot_index":0,"shape":3,"label":"字符串"}],"properties":{"Node name for S&R":"Text Multiline"},"widgets_values":["一个年轻可爱性感的魅魔在地狱的画面，真实的照片，全身照片"]},{"id":46,"type":"ImpactInt","pos":{"0":-1827,"1":1028},"size":{"0":315,"1":58},"flags":{},"order":12,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","links":[52],"shape":3,"label":"整数","slot_index":0}],"properties":{"Node name for S&R":"ImpactInt"},"widgets_values":[896]},{"id":48,"type":"ImpactInt","pos":{"0":-1825,"1":1154},"size":{"0":315,"1":58},"flags":{},"order":13,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","links":[53],"shape":3,"label":"整数","slot_index":0}],"properties":{"Node name for S&R":"ImpactInt"},"widgets_values":[1152]},{"id":47,"type":"SetNode","pos":{"0":-1477,"1":1058},"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":17,"mode":0,"inputs":[{"name":"INT","type":"INT","link":52}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_图像宽度","properties":{"previousName":"图像宽度"},"widgets_values":["图像宽度"]},{"id":49,"type":"SetNode","pos":{"0":-1471,"1":1185},"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":18,"mode":0,"inputs":[{"name":"INT","type":"INT","link":53}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_图像高度","properties":{"previousName":"图像高度"},"widgets_values":["图像高度"]},{"id":44,"type":"Note","pos":{"0":-1285,"1":1039},"size":[315.4767905651786,171.1762263724995],"flags":{},"order":11,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["由于大语言模型和Flux均会占用大量显存本流程对显存进行了释放。请更新最新版本ComfyUI和Easy Use节点使用。\n\n在此处设置想要生成的内容、图片高度、宽度等信息。\n在切换节点：\n选择1并禁用LLM Prompt组可以直接使用输入的提示次生成\n选择2开启LLM Prompt组可以通过本地大语言模型生成提示次"],"color":"#432","bgcolor":"#653"},{"id":40,"type":"ImpactSwitch","pos":{"0":-1306,"1":782},"size":{"0":210,"1":122},"flags":{},"order":26,"mode":0,"inputs":[{"name":"input1","type":"STRING","link":46,"label":"输入1"},{"name":"input2","type":"STRING","link":47,"label":"输入2"},{"name":"input3","type":"STRING","link":null,"label":"输入3"}],"outputs":[{"name":"STRING","type":"STRING","links":[48],"slot_index":0,"shape":3,"label":"STRING"},{"name":"selected_label","type":"STRING","links":null,"shape":3,"label":"标签"},{"name":"selected_index","type":"INT","links":null,"shape":3}],"properties":{"Node name for S&R":"ImpactSwitch"},"widgets_values":[2,false]}],"links":[[10,10,0,11,0,"CUSTOM"],[11,10,1,11,1,"CUSTOM"],[12,13,0,11,3,"DICT"],[13,14,0,11,4,"STRING"],[14,18,0,12,0,"STRING"],[16,12,0,16,0,"STRING"],[17,16,0,17,0,"STRING"],[18,11,0,18,0,"*"],[19,10,0,18,1,"CUSTOM"],[20,10,1,18,2,"CUSTOM"],[21,23,0,19,0,"CLIP"],[22,25,0,20,0,"LATENT"],[23,22,0,20,1,"VAE"],[25,29,0,25,0,"NOISE"],[26,28,0,25,1,"GUIDER"],[27,26,0,25,2,"SAMPLER"],[28,27,0,25,3,"SIGMAS"],[29,31,0,25,4,"LATENT"],[30,33,0,27,0,"MODEL"],[31,33,0,28,0,"MODEL"],[32,30,0,28,1,"CONDITIONING"],[33,19,0,30,0,"CONDITIONING"],[36,24,0,33,0,"MODEL"],[45,37,0,11,5,"STRING"],[46,37,0,40,0,"*"],[47,17,0,40,1,"STRING"],[48,40,0,19,1,"STRING"],[50,20,0,43,0,"*"],[51,43,0,21,0,"IMAGE"],[52,46,0,47,0,"*"],[53,48,0,49,0,"*"],[54,50,0,31,0,"INT"],[55,50,0,33,1,"INT"],[56,51,0,31,1,"INT"],[57,51,0,33,2,"INT"]],"groups":[{"title":"LLM Prompt","bounding":[-788,-49,2670,1464],"color":"#3f789e","font_size":24,"flags":{}},{"title":"Flux","bounding":[-782,1484,2670,1648],"color":"#3f789e","font_size":24,"flags":{}},{"title":"输入区","bounding":[-1942,629,1048,768],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":0.27941459537662183,"offset":[3503.943876879509,735.1681625462527]},"workspace_info":{"id":"VoiW6EAOqbU84nWqW6iX2","saveLock":false,"cloudID":null,"coverMediaPath":null}},"version":0.4}