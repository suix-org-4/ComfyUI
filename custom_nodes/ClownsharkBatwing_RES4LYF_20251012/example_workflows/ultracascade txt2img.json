{"last_node_id":33,"last_link_id":23,"nodes":[{"id":1,"type":"VAEDecode","pos":[1867.32421875,3610.962158203125],"size":[210,46],"flags":{"collapsed":false},"order":29,"mode":0,"inputs":[{"name":"samples","localized_name":"samples","type":"LATENT","link":1},{"name":"vae","localized_name":"vae","type":"VAE","link":2,"slot_index":1}],"outputs":[{"name":"IMAGE","localized_name":"IMAGE","type":"IMAGE","shape":3,"links":[5],"slot_index":0}],"properties":{"Node name for S&R":"VAEDecode"},"widgets_values":[]},{"id":2,"type":"LoraLoader","pos":[-24.50164031982422,3718.225341796875],"size":[359.7619323730469,126],"flags":{},"order":22,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","link":3},{"name":"clip","localized_name":"clip","type":"CLIP","link":4}],"outputs":[{"name":"MODEL","localized_name":"MODEL","type":"MODEL","links":[7],"slot_index":0},{"name":"CLIP","localized_name":"CLIP","type":"CLIP","links":[6,8],"slot_index":1}],"properties":{"Node name for S&R":"LoraLoader"},"widgets_values":["csbw_cascade_dark_ema.safetensors",1,1]},{"id":4,"type":"SharkOptions_UltraCascade_Latent_Beta","pos":[1522.302734375,4481.47900390625],"size":[310.79998779296875,82],"flags":{},"order":0,"mode":0,"inputs":[{"name":"options","localized_name":"options","type":"OPTIONS","shape":7,"link":null}],"outputs":[{"name":"options","localized_name":"options","type":"OPTIONS","links":[22],"slot_index":0}],"properties":{"Node name for S&R":"SharkOptions_UltraCascade_Latent_Beta"},"widgets_values":[1536,1536]},{"id":5,"type":"SharkOptions_UltraCascade_Latent_Beta","pos":[797.6149291992188,4484.87158203125],"size":[310.79998779296875,82],"flags":{},"order":1,"mode":0,"inputs":[{"name":"options","localized_name":"options","type":"OPTIONS","shape":7,"link":null}],"outputs":[{"name":"options","localized_name":"options","type":"OPTIONS","links":[12],"slot_index":0}],"properties":{"Node name for S&R":"SharkOptions_UltraCascade_Latent_Beta"},"widgets_values":[24,24]},{"id":6,"type":"SharkOptions_UltraCascade_Latent_Beta","pos":[1157.109375,4484.87158203125],"size":[310.79998779296875,82],"flags":{},"order":2,"mode":0,"inputs":[{"name":"options","localized_name":"options","type":"OPTIONS","shape":7,"link":null}],"outputs":[{"name":"options","localized_name":"options","type":"OPTIONS","links":[17],"slot_index":0}],"properties":{"Node name for S&R":"SharkOptions_UltraCascade_Latent_Beta"},"widgets_values":[36,36]},{"id":7,"type":"UNETLoader","pos":[1149.8580322265625,3582.3779296875],"size":[356.544677734375,82],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[{"name":"MODEL","localized_name":"MODEL","type":"MODEL","links":[18],"slot_index":0}],"properties":{"Node name for S&R":"UNETLoader"},"widgets_values":["stage_b_lite_CSBW_v1.1.safetensors","default"]},{"id":8,"type":"VAELoader","pos":[1533.0584716796875,3605.814697265625],"size":[294.6280212402344,58],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[{"name":"VAE","localized_name":"VAE","type":"VAE","links":[2],"slot_index":0}],"properties":{"Node name for S&R":"VAELoader"},"widgets_values":["stage_a_ft_hq.safetensors"]},{"id":10,"type":"UltraCascade_Loader","pos":[-394.08612060546875,3670.32373046875],"size":[345.5117492675781,82.95540618896484],"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[{"name":"MODEL","localized_name":"MODEL","type":"MODEL","shape":3,"links":[3],"slot_index":0}],"properties":{"Node name for S&R":"UltraCascade_Loader"},"widgets_values":["stage_c_bf16.safetensors","ultrapixel_t2i.safetensors"]},{"id":11,"type":"CLIPTextEncode","pos":[359.33685302734375,3742.75537109375],"size":[351.592529296875,173.00360107421875],"flags":{},"order":24,"mode":0,"inputs":[{"name":"clip","localized_name":"clip","type":"CLIP","link":6}],"outputs":[{"name":"CONDITIONING","localized_name":"CONDITIONING","type":"CONDITIONING","links":[10,14,19],"slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["impasto oil painting by Yayoi Kusama and Lisa Frank, thick paint textures, tunning contrasts at  night with stylish roughly drawn thick black lines, a nuclear explosion destroying a city, its towering wide glowing nuclear mushroom cloud enveloping the entire skyline, the nuclear fireball lighting up the dark sky"]},{"id":12,"type":"UltraCascade_PerturbedAttentionGuidance","pos":[361.78070068359375,3621.58740234375],"size":[344.3999938964844,58],"flags":{},"order":23,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","link":7}],"outputs":[{"name":"MODEL","localized_name":"MODEL","type":"MODEL","links":[9,13],"slot_index":0}],"properties":{"Node name for S&R":"UltraCascade_PerturbedAttentionGuidance"},"widgets_values":[3]},{"id":13,"type":"CLIPTextEncode","pos":[355.95135498046875,3972.858154296875],"size":[356.2470703125,110.6326904296875],"flags":{},"order":25,"mode":0,"inputs":[{"name":"clip","localized_name":"clip","type":"CLIP","link":8}],"outputs":[{"name":"CONDITIONING","localized_name":"CONDITIONING","type":"CONDITIONING","links":[11,15,20],"slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["low quality, bad quality, low detail, blurry, unsharp"]},{"id":14,"type":"ClownsharKSampler_Beta","pos":[796.9224243164062,3725.34375],"size":[311.41375732421875,693.9824829101562],"flags":{},"order":26,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","shape":7,"link":9},{"name":"positive","localized_name":"positive","type":"CONDITIONING","shape":7,"link":10},{"name":"negative","localized_name":"negative","type":"CONDITIONING","shape":7,"link":11},{"name":"latent_image","localized_name":"latent_image","type":"LATENT","shape":7,"link":null},{"name":"sigmas","localized_name":"sigmas","type":"SIGMAS","shape":7,"link":null},{"name":"guides","localized_name":"guides","type":"GUIDES","shape":7,"link":null},{"name":"options","localized_name":"options","type":"OPTIONS","shape":7,"link":12},{"name":"options 2","type":"OPTIONS","link":null}],"outputs":[{"name":"output","localized_name":"output","type":"LATENT","links":[16],"slot_index":0},{"name":"denoised","localized_name":"denoised","type":"LATENT","links":null},{"name":"options","localized_name":"options","type":"OPTIONS","links":null}],"properties":{"Node name for S&R":"ClownsharKSampler_Beta"},"widgets_values":[0.5,"exponential/res_3s","beta57",30,-1,1,5.5,1,"fixed","standard",true]},{"id":16,"type":"ClownsharKSampler_Beta","pos":[1522.29052734375,3722.670654296875],"size":[309.2452087402344,691.814208984375],"flags":{},"order":28,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","shape":7,"link":18},{"name":"positive","localized_name":"positive","type":"CONDITIONING","shape":7,"link":19},{"name":"negative","localized_name":"negative","type":"CONDITIONING","shape":7,"link":20},{"name":"latent_image","localized_name":"latent_image","type":"LATENT","shape":7,"link":21},{"name":"sigmas","localized_name":"sigmas","type":"SIGMAS","shape":7,"link":null},{"name":"guides","localized_name":"guides","type":"GUIDES","shape":7,"link":null},{"name":"options","localized_name":"options","type":"OPTIONS","shape":7,"link":22},{"name":"options 2","type":"OPTIONS","link":null}],"outputs":[{"name":"output","localized_name":"output","type":"LATENT","links":[1],"slot_index":0},{"name":"denoised","localized_name":"denoised","type":"LATENT","links":null},{"name":"options","localized_name":"options","type":"OPTIONS","links":null}],"properties":{"Node name for S&R":"ClownsharKSampler_Beta"},"widgets_values":[0.5,"exponential/res_3s","beta57",30,-1,1,1,-1,"fixed","standard",true]},{"id":9,"type":"CLIPLoader","pos":[-394.50164794921875,3810.115478515625],"size":[344.635498046875,98],"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[{"name":"CLIP","localized_name":"CLIP","type":"CLIP","links":[4],"slot_index":0}],"properties":{"Node name for S&R":"CLIPLoader"},"widgets_values":["cascade_text_encoder.safetensors","stable_cascade","default"]},{"id":15,"type":"ClownsharKSampler_Beta","pos":[1155.5926513671875,3724.48974609375],"size":[314.421142578125,693.9824829101562],"flags":{},"order":27,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","shape":7,"link":13},{"name":"positive","localized_name":"positive","type":"CONDITIONING","shape":7,"link":14},{"name":"negative","localized_name":"negative","type":"CONDITIONING","shape":7,"link":15},{"name":"latent_image","localized_name":"latent_image","type":"LATENT","shape":7,"link":16},{"name":"sigmas","localized_name":"sigmas","type":"SIGMAS","shape":7,"link":null},{"name":"guides","localized_name":"guides","type":"GUIDES","shape":7,"link":null},{"name":"options","localized_name":"options","type":"OPTIONS","shape":7,"link":17},{"name":"options 2","type":"OPTIONS","link":null}],"outputs":[{"name":"output","localized_name":"output","type":"LATENT","links":[21],"slot_index":0},{"name":"denoised","localized_name":"denoised","type":"LATENT","links":null},{"name":"options","localized_name":"options","type":"OPTIONS","links":null}],"properties":{"Node name for S&R":"ClownsharKSampler_Beta"},"widgets_values":[0.5,"exponential/res_3s","beta57",30,-1,1,5.5,100,"fixed","standard",true]},{"id":20,"type":"Note","pos":[1150,4640],"size":[331.63720703125,415.29815673828125],"flags":{},"order":7,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Stage UP: a patched version of Stable Cascade stage C (\"UltraPixel\"). \n\nThe key with these dimensions is to keep the aspect ratio the same as the stage C latent. Typically, best results are with a 1.5x upscale. 2.0x works, but will result in somewhat more issues with doubling, and can be a lot slower. However, the detail level will also be very high.\n\nSome viable resolutions are listed below. Asterisks signify ones that have been verified to work particularly well.\n\n32x32\n36x36 **\n40x40\n42x42\n48x48 *\n\n40x24\n50x30\n60x36 **\n70x42\n80x48 *\n\n72x36 \n80x40 *\n96x48 (very slow!)\n\n\n\n"],"color":"#432","bgcolor":"#653"},{"id":21,"type":"Note","pos":[1520,4640],"size":[331.63720703125,415.29815673828125],"flags":{},"order":8,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Stage B: the Stable Cascade superresolution model.\n\nAs with stage UP, the key with these dimensions is to keep the aspect ratio the same as the prior latents. Theoretically, any resolution may be used, though some odd distortions can occur when the ideal upscale ratio is not used. It's not entirely clear what those ratios are, so some experimentation may be necessary. \n\nSome resolutions that work particularly well are:\n\n1536x1536 *\n2048x2048 *\n\n1600x960\n2560x1536 **\n2880x1792 *\n3200x1920\n\nIf you use stage B lite, you can hit 4k resolutions without even using more than 12GB of VRAM.\n\nIt's highly recommended to use the CSBW finetune of stage B, as it fixes many of the severe artifact problems the original release had.\n\nNote: CFG is not needed for this stage!"],"color":"#432","bgcolor":"#653"},{"id":19,"type":"Note","pos":[780,4640],"size":[331.63720703125,415.29815673828125],"flags":{},"order":9,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Stage C: the original Stable Cascade version. \n\nStable Cascade latents are actually quite small: typically, a 1024x1024 image will be generated from a stage C latent that is only 24x24 (for comparison, with SDXL or SD1.5, the dimensions are 128x128). \n\n\"Compression\" is just a shorthand method of determining these dimensions, such as 24x24 (1024 / 42 = 24.38, which means a \"compression\" of 42).\n\nThis poses a problem though: Cascade was only trained on a handful of resolutions. The difference between 24x24 and 25x25 is a significant drop in quality and coherence. Therefore, it is best to just set these dimensions directly.\n\nThe best trained resolutions are:\n\n24x24 > 32x32\n30x16 > 40x24 \n\n48x24 also works, but seems to result in more doubling problems than the others.\n\n\n"],"color":"#432","bgcolor":"#653"},{"id":23,"type":"Note","pos":[-1140,3810],"size":[715.61083984375,89.37511444091797],"flags":{},"order":10,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Any clip G will do. The Cascade version is available at:\n\nhttps://huggingface.co/stabilityai/stable-cascade/blob/main/text_encoder/model.bf16.safetensors\n\n"],"color":"#432","bgcolor":"#653"},{"id":22,"type":"Note","pos":[-1140,3590],"size":[717.709228515625,165.61032104492188],"flags":{},"order":11,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["I recommend the BF16 version of stage C. There is no visible difference vs. the full precision weights, and it halves the disk space requirements.\n\nhttps://huggingface.co/stabilityai/stable-cascade/blob/main/stage_c_bf16.safetensors\n\nIMPORTANT: The original UltraPixel \"safetensors\" is not a safetensors at all - it is a PICKLE, where they lazily (at best) changed the file extension to \".safetensors\"!\n\nI converted it to a real safetensors file, and it's available below:\n\nhttps://huggingface.co/ClownsharkBatwing/ultrapixel_convert/blob/main/ultrapixel_t2i.safetensors"],"color":"#432","bgcolor":"#653"},{"id":26,"type":"Note","pos":[570,3250],"size":[457.5304870605469,94.27093505859375],"flags":{},"order":12,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["This is a checkpoint that, for convenience, includes the stage B lite CSBW finetune, clip G, and stage A (the FT_HQ finetune).\n\nhttps://huggingface.co/ClownsharkBatwing/CSBW_Style/blob/main/cascade_B-lite_refined_CSBW_v1.1.safetensors"],"color":"#432","bgcolor":"#653"},{"id":27,"type":"Note","pos":[1050,3420],"size":[457.5304870605469,94.27093505859375],"flags":{},"order":13,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["This is the stage B lite CSBW finetune (model only).\n\nhttps://huggingface.co/ClownsharkBatwing/Cascade_Stage_B_CSBW_Refined/blob/main/stage_b_lite_CSBW_v1.1.safetensors"],"color":"#432","bgcolor":"#653"},{"id":25,"type":"Note","pos":[305.43292236328125,3455.5634765625],"size":[457.5304870605469,94.27093505859375],"flags":{},"order":14,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Perturbed attention guidance (PAG) makes an enormous difference with Stable Cascade stages C and UP. Like CFG, it will double the runtime."],"color":"#432","bgcolor":"#653"},{"id":29,"type":"Note","pos":[1534.365478515625,3422.38427734375],"size":[547.0546875,91.47331237792969],"flags":{},"order":15,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["This is a finetune of stage A. You will get a sharper image, but in images with large white areas, small circular grey halos are sometimes visible.\n\nhttps://huggingface.co/madebyollin/stage-a-ft-hq/blob/main/stage_a_ft_hq.safetensors"],"color":"#432","bgcolor":"#653"},{"id":28,"type":"CheckpointLoaderSimple","pos":[1054.370849609375,3250],"size":[452.7829895019531,102.89583587646484],"flags":{},"order":16,"mode":0,"inputs":[],"outputs":[{"name":"MODEL","localized_name":"MODEL","type":"MODEL","links":null},{"name":"CLIP","localized_name":"CLIP","type":"CLIP","links":null},{"name":"VAE","localized_name":"VAE","type":"VAE","links":null}],"properties":{"Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["cascade_B-lite_refined_CSBW_v1.1.safetensors"]},{"id":24,"type":"Note","pos":[-1140,3960],"size":[715.61083984375,113.57872772216797],"flags":{},"order":17,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["The LORA was trained with OneTrainer (https://github.com/Nerogar/OneTrainer) on some of my own SDXL generations. It has deep colors and is strong with wacky paint, illustration, and vector art styles. \n\nCascade learns extremely quickly and is very adept with artistic styles (it knows many artist names).\n\nhttps://huggingface.co/ClownsharkBatwing/CSBW_Style/blob/main/csbw_cascade_dark_ema.safetensors\n"],"color":"#432","bgcolor":"#653"},{"id":30,"type":"Note","pos":[796.0823364257812,3575.965576171875],"size":[315.20135498046875,88],"flags":{},"order":18,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["res_3s can be replaced with res_2s or even res_2m or res_3m (in the multistep folder in the sampler_name dropdown) if more speed is desired."],"color":"#432","bgcolor":"#653"},{"id":33,"type":"Note","pos":[-220,4190],"size":[336.9422302246094,88],"flags":{},"order":19,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["TIP: Try connecting the options nodes to the right to some of the samplers. It'll replace the default noise types with perlin, which can be quite good with Cascade."],"color":"#432","bgcolor":"#653"},{"id":31,"type":"SharkOptions_Beta","pos":[150,4190],"size":[234.2189178466797,130],"flags":{},"order":20,"mode":0,"inputs":[{"name":"options","localized_name":"options","type":"OPTIONS","shape":7,"link":null}],"outputs":[{"name":"options","localized_name":"options","type":"OPTIONS","links":null}],"properties":{"Node name for S&R":"SharkOptions_Beta"},"widgets_values":["perlin",1,1,false]},{"id":32,"type":"ClownOptions_SDE_Beta","pos":[420,4190],"size":[281.34088134765625,266],"flags":{},"order":21,"mode":0,"inputs":[{"name":"etas","localized_name":"etas","type":"SIGMAS","shape":7,"link":null},{"name":"etas_substep","localized_name":"etas_substep","type":"SIGMAS","shape":7,"link":null},{"name":"options","localized_name":"options","type":"OPTIONS","shape":7,"link":null}],"outputs":[{"name":"options","localized_name":"options","type":"OPTIONS","links":null}],"properties":{"Node name for S&R":"ClownOptions_SDE_Beta"},"widgets_values":["perlin","perlin","hard","hard",0.5,0.5,-1,"fixed"]},{"id":3,"type":"SaveImage","pos":[1871.823974609375,3716.926025390625],"size":[670.7464599609375,700.1661987304688],"flags":{},"order":30,"mode":0,"inputs":[{"name":"images","localized_name":"images","type":"IMAGE","link":5}],"outputs":[],"properties":{},"widgets_values":["ComfyUI"]}],"links":[[1,16,0,1,0,"LATENT"],[2,8,0,1,1,"VAE"],[3,10,0,2,0,"MODEL"],[4,9,0,2,1,"CLIP"],[5,1,0,3,0,"IMAGE"],[6,2,1,11,0,"CLIP"],[7,2,0,12,0,"MODEL"],[8,2,1,13,0,"CLIP"],[9,12,0,14,0,"MODEL"],[10,11,0,14,1,"CONDITIONING"],[11,13,0,14,2,"CONDITIONING"],[12,5,0,14,6,"OPTIONS"],[13,12,0,15,0,"MODEL"],[14,11,0,15,1,"CONDITIONING"],[15,13,0,15,2,"CONDITIONING"],[16,14,0,15,3,"LATENT"],[17,6,0,15,6,"OPTIONS"],[18,7,0,16,0,"MODEL"],[19,11,0,16,1,"CONDITIONING"],[20,13,0,16,2,"CONDITIONING"],[21,15,0,16,3,"LATENT"],[22,4,0,16,6,"OPTIONS"]],"groups":[],"config":{},"extra":{"ds":{"scale":1.2100000000000006,"offset":[2786.903339088035,-3170.107825364122]},"VHS_latentpreview":false,"VHS_latentpreviewrate":0},"version":0.4}